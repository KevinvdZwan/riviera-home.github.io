/**
 * Select2 Dutch translation
 */
(function ($) {
    "use strict";

    $.fn.select2.locales['nl'] = {
        formatNoMatches: function () { return "Geen resultaten gevonden"; },
        formatInputTooShort: function (input, min) { var n = min - input.length; return "Vul nog " + n + " karakter" + (n == 1 ? "" : "s") + " in"; },
        formatInputTooLong: function (input, max) { var n = input.length - max; return "Haal " + n + " karakter" + (n == 1 ? "" : "s") + " weg"; },
        formatSelectionTooBig: function (limit) { return "Maximaal " + limit + " item" + (limit == 1 ? "" : "s") + " toegestaan"; },
        formatLoadMore: function (pageNumber) { return "Meer resultaten laden…"; },
        formatSearching: function () { return "Zoeken…"; }
    };

    $.extend($.fn.select2.defaults, $.fn.select2.locales['nl']);
})(jQuery);


!function (a) { "use strict"; var b = function (a, c, d) { var e, f, g = document.createElement("img"); if (g.onerror = c, g.onload = function () { !f || d && d.noRevoke || b.revokeObjectURL(f), c && c(b.scale(g, d)) }, b.isInstanceOf("Blob", a) || b.isInstanceOf("File", a)) e = f = b.createObjectURL(a), g._type = a.type; else { if ("string" != typeof a) return !1; e = a, d && d.crossOrigin && (g.crossOrigin = d.crossOrigin) } return e ? (g.src = e, g) : b.readFile(a, function (a) { var b = a.target; b && b.result ? g.src = b.result : c && c(a) }) }, c = window.createObjectURL && window || window.URL && URL.revokeObjectURL && URL || window.webkitURL && webkitURL; b.isInstanceOf = function (a, b) { return Object.prototype.toString.call(b) === "[object " + a + "]" }, b.transformCoordinates = function () { }, b.getTransformedOptions = function (a, b) { var c, d, e, f, g = b.aspectRatio; if (!g) return b; c = {}; for (d in b) b.hasOwnProperty(d) && (c[d] = b[d]); return c.crop = !0, e = a.naturalWidth || a.width, f = a.naturalHeight || a.height, e / f > g ? (c.maxWidth = f * g, c.maxHeight = f) : (c.maxWidth = e, c.maxHeight = e / g), c }, b.renderImageToCanvas = function (a, b, c, d, e, f, g, h, i, j) { return a.getContext("2d").drawImage(b, c, d, e, f, g, h, i, j), a }, b.hasCanvasOption = function (a) { return a.canvas || a.crop || a.aspectRatio }, b.scale = function (a, c) { c = c || {}; var d, e, f, g, h, i, j, k, l, m = document.createElement("canvas"), n = a.getContext || b.hasCanvasOption(c) && m.getContext, o = a.naturalWidth || a.width, p = a.naturalHeight || a.height, q = o, r = p, s = function () { var a = Math.max((f || q) / q, (g || r) / r); a > 1 && (q *= a, r *= a) }, t = function () { var a = Math.min((d || q) / q, (e || r) / r); 1 > a && (q *= a, r *= a) }; return n && (c = b.getTransformedOptions(a, c), j = c.left || 0, k = c.top || 0, c.sourceWidth ? (h = c.sourceWidth, void 0 !== c.right && void 0 === c.left && (j = o - h - c.right)) : h = o - j - (c.right || 0), c.sourceHeight ? (i = c.sourceHeight, void 0 !== c.bottom && void 0 === c.top && (k = p - i - c.bottom)) : i = p - k - (c.bottom || 0), q = h, r = i), d = c.maxWidth, e = c.maxHeight, f = c.minWidth, g = c.minHeight, n && d && e && c.crop ? (q = d, r = e, l = h / i - d / e, 0 > l ? (i = e * h / d, void 0 === c.top && void 0 === c.bottom && (k = (p - i) / 2)) : l > 0 && (h = d * i / e, void 0 === c.left && void 0 === c.right && (j = (o - h) / 2))) : ((c.contain || c.cover) && (f = d = d || f, g = e = e || g), c.cover ? (t(), s()) : (s(), t())), n ? (m.width = q, m.height = r, b.transformCoordinates(m, c), b.renderImageToCanvas(m, a, j, k, h, i, 0, 0, q, r)) : (a.width = q, a.height = r, a) }, b.createObjectURL = function (a) { return c ? c.createObjectURL(a) : !1 }, b.revokeObjectURL = function (a) { return c ? c.revokeObjectURL(a) : !1 }, b.readFile = function (a, b, c) { if (window.FileReader) { var d = new FileReader; if (d.onload = d.onerror = b, c = c || "readAsDataURL", d[c]) return d[c](a), d } return !1 }, "function" == typeof define && define.amd ? define(function () { return b }) : a.loadImage = b }(window), function (a) { "use strict"; "function" == typeof define && define.amd ? define(["load-image"], a) : a(window.loadImage) }(function (a) { "use strict"; if (window.navigator && window.navigator.platform && /iP(hone|od|ad)/.test(window.navigator.platform)) { var b = a.renderImageToCanvas; a.detectSubsampling = function (a) { var b, c; return a.width * a.height > 1048576 ? (b = document.createElement("canvas"), b.width = b.height = 1, c = b.getContext("2d"), c.drawImage(a, -a.width + 1, 0), 0 === c.getImageData(0, 0, 1, 1).data[3]) : !1 }, a.detectVerticalSquash = function (a, b) { var c, d, e, f, g, h = a.naturalHeight || a.height, i = document.createElement("canvas"), j = i.getContext("2d"); for (b && (h /= 2), i.width = 1, i.height = h, j.drawImage(a, 0, 0), c = j.getImageData(0, 0, 1, h).data, d = 0, e = h, f = h; f > d;)g = c[4 * (f - 1) + 3], 0 === g ? e = f : d = f, f = e + d >> 1; return f / h || 1 }, a.renderImageToCanvas = function (c, d, e, f, g, h, i, j, k, l) { if ("image/jpeg" === d._type) { var m, n, o, p, q = c.getContext("2d"), r = document.createElement("canvas"), s = 1024, t = r.getContext("2d"); if (r.width = s, r.height = s, q.save(), m = a.detectSubsampling(d), m && (e /= 2, f /= 2, g /= 2, h /= 2), n = a.detectVerticalSquash(d, m), m || 1 !== n) { for (f *= n, k = Math.ceil(s * k / g), l = Math.ceil(s * l / h / n), j = 0, p = 0; h > p;) { for (i = 0, o = 0; g > o;)t.clearRect(0, 0, s, s), t.drawImage(d, e, f, g, h, -o, -p, g, h), q.drawImage(r, 0, 0, s, s, i, j, k, l), o += s, i += k; p += s, j += l } return q.restore(), c } } return b(c, d, e, f, g, h, i, j, k, l) } } }), function (a) { "use strict"; "function" == typeof define && define.amd ? define(["load-image"], a) : a(window.loadImage) }(function (a) { "use strict"; var b = a.hasCanvasOption, c = a.transformCoordinates, d = a.getTransformedOptions; a.hasCanvasOption = function (c) { return b.call(a, c) || c.orientation }, a.transformCoordinates = function (b, d) { c.call(a, b, d); var e = b.getContext("2d"), f = b.width, g = b.height, h = d.orientation; if (h && !(h > 8)) switch (h > 4 && (b.width = g, b.height = f), h) { case 2: e.translate(f, 0), e.scale(-1, 1); break; case 3: e.translate(f, g), e.rotate(Math.PI); break; case 4: e.translate(0, g), e.scale(1, -1); break; case 5: e.rotate(.5 * Math.PI), e.scale(1, -1); break; case 6: e.rotate(.5 * Math.PI), e.translate(0, -g); break; case 7: e.rotate(.5 * Math.PI), e.translate(f, -g), e.scale(-1, 1); break; case 8: e.rotate(-.5 * Math.PI), e.translate(-f, 0) } }, a.getTransformedOptions = function (b, c) { var e, f, g = d.call(a, b, c), h = g.orientation; if (!h || h > 8 || 1 === h) return g; e = {}; for (f in g) g.hasOwnProperty(f) && (e[f] = g[f]); switch (g.orientation) { case 2: e.left = g.right, e.right = g.left; break; case 3: e.left = g.right, e.top = g.bottom, e.right = g.left, e.bottom = g.top; break; case 4: e.top = g.bottom, e.bottom = g.top; break; case 5: e.left = g.top, e.top = g.left, e.right = g.bottom, e.bottom = g.right; break; case 6: e.left = g.top, e.top = g.right, e.right = g.bottom, e.bottom = g.left; break; case 7: e.left = g.bottom, e.top = g.right, e.right = g.top, e.bottom = g.left; break; case 8: e.left = g.bottom, e.top = g.left, e.right = g.top, e.bottom = g.right }return g.orientation > 4 && (e.maxWidth = g.maxHeight, e.maxHeight = g.maxWidth, e.minWidth = g.minHeight, e.minHeight = g.minWidth, e.sourceWidth = g.sourceHeight, e.sourceHeight = g.sourceWidth), e } }), function (a) { "use strict"; "function" == typeof define && define.amd ? define(["load-image"], a) : a(window.loadImage) }(function (a) { "use strict"; var b = window.Blob && (Blob.prototype.slice || Blob.prototype.webkitSlice || Blob.prototype.mozSlice); a.blobSlice = b && function () { var a = this.slice || this.webkitSlice || this.mozSlice; return a.apply(this, arguments) }, a.metaDataParsers = { jpeg: { 65505: [] } }, a.parseMetaData = function (b, c, d) { d = d || {}; var e = this, f = d.maxMetaDataSize || 262144, g = {}, h = !(window.DataView && b && b.size >= 12 && "image/jpeg" === b.type && a.blobSlice); (h || !a.readFile(a.blobSlice.call(b, 0, f), function (b) { if (b.target.error) return console.log(b.target.error), void c(g); var f, h, i, j, k = b.target.result, l = new DataView(k), m = 2, n = l.byteLength - 4, o = m; if (65496 === l.getUint16(0)) { for (; n > m && (f = l.getUint16(m), f >= 65504 && 65519 >= f || 65534 === f);) { if (h = l.getUint16(m + 2) + 2, m + h > l.byteLength) { console.log("Invalid meta data: Invalid segment size."); break } if (i = a.metaDataParsers.jpeg[f]) for (j = 0; j < i.length; j += 1)i[j].call(e, l, m, h, g, d); m += h, o = m } !d.disableImageHead && o > 6 && (k.slice ? g.imageHead = k.slice(0, o) : g.imageHead = new Uint8Array(k).subarray(0, o)) } else console.log("Invalid JPEG file: Missing JPEG marker."); c(g) }, "readAsArrayBuffer")) && c(g) } }), function (a) { "use strict"; "function" == typeof define && define.amd ? define(["load-image", "load-image-meta"], a) : a(window.loadImage) }(function (a) { "use strict"; a.ExifMap = function () { return this }, a.ExifMap.prototype.map = { Orientation: 274 }, a.ExifMap.prototype.get = function (a) { return this[a] || this[this.map[a]] }, a.getExifThumbnail = function (a, b, c) { var d, e, f; if (!c || b + c > a.byteLength) return void console.log("Invalid Exif data: Invalid thumbnail data."); for (d = [], e = 0; c > e; e += 1)f = a.getUint8(b + e), d.push((16 > f ? "0" : "") + f.toString(16)); return "data:image/jpeg,%" + d.join("%") }, a.exifTagTypes = { 1: { getValue: function (a, b) { return a.getUint8(b) }, size: 1 }, 2: { getValue: function (a, b) { return String.fromCharCode(a.getUint8(b)) }, size: 1, ascii: !0 }, 3: { getValue: function (a, b, c) { return a.getUint16(b, c) }, size: 2 }, 4: { getValue: function (a, b, c) { return a.getUint32(b, c) }, size: 4 }, 5: { getValue: function (a, b, c) { return a.getUint32(b, c) / a.getUint32(b + 4, c) }, size: 8 }, 9: { getValue: function (a, b, c) { return a.getInt32(b, c) }, size: 4 }, 10: { getValue: function (a, b, c) { return a.getInt32(b, c) / a.getInt32(b + 4, c) }, size: 8 } }, a.exifTagTypes[7] = a.exifTagTypes[1], a.getExifValue = function (b, c, d, e, f, g) { var h, i, j, k, l, m, n = a.exifTagTypes[e]; if (!n) return void console.log("Invalid Exif data: Invalid tag type."); if (h = n.size * f, i = h > 4 ? c + b.getUint32(d + 8, g) : d + 8, i + h > b.byteLength) return void console.log("Invalid Exif data: Invalid data offset."); if (1 === f) return n.getValue(b, i, g); for (j = [], k = 0; f > k; k += 1)j[k] = n.getValue(b, i + k * n.size, g); if (n.ascii) { for (l = "", k = 0; k < j.length && (m = j[k], "\x00" !== m); k += 1)l += m; return l } return j }, a.parseExifTag = function (b, c, d, e, f) { var g = b.getUint16(d, e); f.exif[g] = a.getExifValue(b, c, d, b.getUint16(d + 2, e), b.getUint32(d + 4, e), e) }, a.parseExifTags = function (a, b, c, d, e) { var f, g, h; if (c + 6 > a.byteLength) return void console.log("Invalid Exif data: Invalid directory offset."); if (f = a.getUint16(c, d), g = c + 2 + 12 * f, g + 4 > a.byteLength) return void console.log("Invalid Exif data: Invalid directory size."); for (h = 0; f > h; h += 1)this.parseExifTag(a, b, c + 2 + 12 * h, d, e); return a.getUint32(g, d) }, a.parseExifData = function (b, c, d, e, f) { if (!f.disableExif) { var g, h, i, j = c + 10; if (1165519206 === b.getUint32(c + 4)) { if (j + 8 > b.byteLength) return void console.log("Invalid Exif data: Invalid segment size."); if (0 !== b.getUint16(c + 8)) return void console.log("Invalid Exif data: Missing byte alignment offset."); switch (b.getUint16(j)) { case 18761: g = !0; break; case 19789: g = !1; break; default: return void console.log("Invalid Exif data: Invalid byte alignment marker.") }if (42 !== b.getUint16(j + 2, g)) return void console.log("Invalid Exif data: Missing TIFF marker."); h = b.getUint32(j + 4, g), e.exif = new a.ExifMap, h = a.parseExifTags(b, j, j + h, g, e), h && !f.disableExifThumbnail && (i = { exif: {} }, h = a.parseExifTags(b, j, j + h, g, i), i.exif[513] && (e.exif.Thumbnail = a.getExifThumbnail(b, j + i.exif[513], i.exif[514]))), e.exif[34665] && !f.disableExifSub && a.parseExifTags(b, j, j + e.exif[34665], g, e), e.exif[34853] && !f.disableExifGps && a.parseExifTags(b, j, j + e.exif[34853], g, e) } } }, a.metaDataParsers.jpeg[65505].push(a.parseExifData) }), function (a) { "use strict"; "function" == typeof define && define.amd ? define(["load-image", "load-image-exif"], a) : a(window.loadImage) }(function (a) { "use strict"; a.ExifMap.prototype.tags = { 256: "ImageWidth", 257: "ImageHeight", 34665: "ExifIFDPointer", 34853: "GPSInfoIFDPointer", 40965: "InteroperabilityIFDPointer", 258: "BitsPerSample", 259: "Compression", 262: "PhotometricInterpretation", 274: "Orientation", 277: "SamplesPerPixel", 284: "PlanarConfiguration", 530: "YCbCrSubSampling", 531: "YCbCrPositioning", 282: "XResolution", 283: "YResolution", 296: "ResolutionUnit", 273: "StripOffsets", 278: "RowsPerStrip", 279: "StripByteCounts", 513: "JPEGInterchangeFormat", 514: "JPEGInterchangeFormatLength", 301: "TransferFunction", 318: "WhitePoint", 319: "PrimaryChromaticities", 529: "YCbCrCoefficients", 532: "ReferenceBlackWhite", 306: "DateTime", 270: "ImageDescription", 271: "Make", 272: "Model", 305: "Software", 315: "Artist", 33432: "Copyright", 36864: "ExifVersion", 40960: "FlashpixVersion", 40961: "ColorSpace", 40962: "PixelXDimension", 40963: "PixelYDimension", 42240: "Gamma", 37121: "ComponentsConfiguration", 37122: "CompressedBitsPerPixel", 37500: "MakerNote", 37510: "UserComment", 40964: "RelatedSoundFile", 36867: "DateTimeOriginal", 36868: "DateTimeDigitized", 37520: "SubSecTime", 37521: "SubSecTimeOriginal", 37522: "SubSecTimeDigitized", 33434: "ExposureTime", 33437: "FNumber", 34850: "ExposureProgram", 34852: "SpectralSensitivity", 34855: "PhotographicSensitivity", 34856: "OECF", 34864: "SensitivityType", 34865: "StandardOutputSensitivity", 34866: "RecommendedExposureIndex", 34867: "ISOSpeed", 34868: "ISOSpeedLatitudeyyy", 34869: "ISOSpeedLatitudezzz", 37377: "ShutterSpeedValue", 37378: "ApertureValue", 37379: "BrightnessValue", 37380: "ExposureBias", 37381: "MaxApertureValue", 37382: "SubjectDistance", 37383: "MeteringMode", 37384: "LightSource", 37385: "Flash", 37396: "SubjectArea", 37386: "FocalLength", 41483: "FlashEnergy", 41484: "SpatialFrequencyResponse", 41486: "FocalPlaneXResolution", 41487: "FocalPlaneYResolution", 41488: "FocalPlaneResolutionUnit", 41492: "SubjectLocation", 41493: "ExposureIndex", 41495: "SensingMethod", 41728: "FileSource", 41729: "SceneType", 41730: "CFAPattern", 41985: "CustomRendered", 41986: "ExposureMode", 41987: "WhiteBalance", 41988: "DigitalZoomRatio", 41989: "FocalLengthIn35mmFilm", 41990: "SceneCaptureType", 41991: "GainControl", 41992: "Contrast", 41993: "Saturation", 41994: "Sharpness", 41995: "DeviceSettingDescription", 41996: "SubjectDistanceRange", 42016: "ImageUniqueID", 42032: "CameraOwnerName", 42033: "BodySerialNumber", 42034: "LensSpecification", 42035: "LensMake", 42036: "LensModel", 42037: "LensSerialNumber", 0: "GPSVersionID", 1: "GPSLatitudeRef", 2: "GPSLatitude", 3: "GPSLongitudeRef", 4: "GPSLongitude", 5: "GPSAltitudeRef", 6: "GPSAltitude", 7: "GPSTimeStamp", 8: "GPSSatellites", 9: "GPSStatus", 10: "GPSMeasureMode", 11: "GPSDOP", 12: "GPSSpeedRef", 13: "GPSSpeed", 14: "GPSTrackRef", 15: "GPSTrack", 16: "GPSImgDirectionRef", 17: "GPSImgDirection", 18: "GPSMapDatum", 19: "GPSDestLatitudeRef", 20: "GPSDestLatitude", 21: "GPSDestLongitudeRef", 22: "GPSDestLongitude", 23: "GPSDestBearingRef", 24: "GPSDestBearing", 25: "GPSDestDistanceRef", 26: "GPSDestDistance", 27: "GPSProcessingMethod", 28: "GPSAreaInformation", 29: "GPSDateStamp", 30: "GPSDifferential", 31: "GPSHPositioningError" }, a.ExifMap.prototype.stringValues = { ExposureProgram: { 0: "Undefined", 1: "Manual", 2: "Normal program", 3: "Aperture priority", 4: "Shutter priority", 5: "Creative program", 6: "Action program", 7: "Portrait mode", 8: "Landscape mode" }, MeteringMode: { 0: "Unknown", 1: "Average", 2: "CenterWeightedAverage", 3: "Spot", 4: "MultiSpot", 5: "Pattern", 6: "Partial", 255: "Other" }, LightSource: { 0: "Unknown", 1: "Daylight", 2: "Fluorescent", 3: "Tungsten (incandescent light)", 4: "Flash", 9: "Fine weather", 10: "Cloudy weather", 11: "Shade", 12: "Daylight fluorescent (D 5700 - 7100K)", 13: "Day white fluorescent (N 4600 - 5400K)", 14: "Cool white fluorescent (W 3900 - 4500K)", 15: "White fluorescent (WW 3200 - 3700K)", 17: "Standard light A", 18: "Standard light B", 19: "Standard light C", 20: "D55", 21: "D65", 22: "D75", 23: "D50", 24: "ISO studio tungsten", 255: "Other" }, Flash: { 0: "Flash did not fire", 1: "Flash fired", 5: "Strobe return light not detected", 7: "Strobe return light detected", 9: "Flash fired, compulsory flash mode", 13: "Flash fired, compulsory flash mode, return light not detected", 15: "Flash fired, compulsory flash mode, return light detected", 16: "Flash did not fire, compulsory flash mode", 24: "Flash did not fire, auto mode", 25: "Flash fired, auto mode", 29: "Flash fired, auto mode, return light not detected", 31: "Flash fired, auto mode, return light detected", 32: "No flash function", 65: "Flash fired, red-eye reduction mode", 69: "Flash fired, red-eye reduction mode, return light not detected", 71: "Flash fired, red-eye reduction mode, return light detected", 73: "Flash fired, compulsory flash mode, red-eye reduction mode", 77: "Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected", 79: "Flash fired, compulsory flash mode, red-eye reduction mode, return light detected", 89: "Flash fired, auto mode, red-eye reduction mode", 93: "Flash fired, auto mode, return light not detected, red-eye reduction mode", 95: "Flash fired, auto mode, return light detected, red-eye reduction mode" }, SensingMethod: { 1: "Undefined", 2: "One-chip color area sensor", 3: "Two-chip color area sensor", 4: "Three-chip color area sensor", 5: "Color sequential area sensor", 7: "Trilinear sensor", 8: "Color sequential linear sensor" }, SceneCaptureType: { 0: "Standard", 1: "Landscape", 2: "Portrait", 3: "Night scene" }, SceneType: { 1: "Directly photographed" }, CustomRendered: { 0: "Normal process", 1: "Custom process" }, WhiteBalance: { 0: "Auto white balance", 1: "Manual white balance" }, GainControl: { 0: "None", 1: "Low gain up", 2: "High gain up", 3: "Low gain down", 4: "High gain down" }, Contrast: { 0: "Normal", 1: "Soft", 2: "Hard" }, Saturation: { 0: "Normal", 1: "Low saturation", 2: "High saturation" }, Sharpness: { 0: "Normal", 1: "Soft", 2: "Hard" }, SubjectDistanceRange: { 0: "Unknown", 1: "Macro", 2: "Close view", 3: "Distant view" }, FileSource: { 3: "DSC" }, ComponentsConfiguration: { 0: "", 1: "Y", 2: "Cb", 3: "Cr", 4: "R", 5: "G", 6: "B" }, Orientation: { 1: "top-left", 2: "top-right", 3: "bottom-right", 4: "bottom-left", 5: "left-top", 6: "right-top", 7: "right-bottom", 8: "left-bottom" } }, a.ExifMap.prototype.getText = function (a) { var b = this.get(a); switch (a) { case "LightSource": case "Flash": case "MeteringMode": case "ExposureProgram": case "SensingMethod": case "SceneCaptureType": case "SceneType": case "CustomRendered": case "WhiteBalance": case "GainControl": case "Contrast": case "Saturation": case "Sharpness": case "SubjectDistanceRange": case "FileSource": case "Orientation": return this.stringValues[a][b]; case "ExifVersion": case "FlashpixVersion": return String.fromCharCode(b[0], b[1], b[2], b[3]); case "ComponentsConfiguration": return this.stringValues[a][b[0]] + this.stringValues[a][b[1]] + this.stringValues[a][b[2]] + this.stringValues[a][b[3]]; case "GPSVersionID": return b[0] + "." + b[1] + "." + b[2] + "." + b[3] }return String(b) }, function (a) { var b, c = a.tags, d = a.map; for (b in c) c.hasOwnProperty(b) && (d[c[b]] = b) }(a.ExifMap.prototype), a.ExifMap.prototype.getAll = function () { var a, b, c = {}; for (a in this) this.hasOwnProperty(a) && (b = this.tags[a], b && (c[b] = this.getText(b))); return c } }), function (a) { "use strict"; var b = a.HTMLCanvasElement && a.HTMLCanvasElement.prototype, c = a.Blob && function () { try { return Boolean(new Blob) } catch (a) { return !1 } }(), d = c && a.Uint8Array && function () { try { return 100 === new Blob([new Uint8Array(100)]).size } catch (a) { return !1 } }(), e = a.BlobBuilder || a.WebKitBlobBuilder || a.MozBlobBuilder || a.MSBlobBuilder, f = (c || e) && a.atob && a.ArrayBuffer && a.Uint8Array && function (a) { var b, f, g, h, i, j; for (b = a.split(",")[0].indexOf("base64") >= 0 ? atob(a.split(",")[1]) : decodeURIComponent(a.split(",")[1]), f = new ArrayBuffer(b.length), g = new Uint8Array(f), h = 0; h < b.length; h += 1)g[h] = b.charCodeAt(h); return i = a.split(",")[0].split(":")[1].split(";")[0], c ? new Blob([d ? g : f], { type: i }) : (j = new e, j.append(f), j.getBlob(i)) }; a.HTMLCanvasElement && !b.toBlob && (b.mozGetAsFile ? b.toBlob = function (a, c, d) { a(d && b.toDataURL && f ? f(this.toDataURL(c, d)) : this.mozGetAsFile("blob", c)) } : b.toDataURL && f && (b.toBlob = function (a, b, c) { a(f(this.toDataURL(b, c))) })), "function" == typeof define && define.amd ? define(function () { return f }) : a.dataURLtoBlob = f }(window), function (a) { "use strict"; "function" == typeof define && define.amd ? define(["jquery"], a) : a(window.jQuery) }(function (a) { "use strict"; var b = 0; a.ajaxTransport("iframe", function (c) { if (c.async) { var d, e, f, g = c.initialIframeSrc || "javascript:false;"; return { send: function (h, i) { d = a('<form style="display:none;"></form>'), d.attr("accept-charset", c.formAcceptCharset), f = /\?/.test(c.url) ? "&" : "?", "DELETE" === c.type ? (c.url = c.url + f + "_method=DELETE", c.type = "POST") : "PUT" === c.type ? (c.url = c.url + f + "_method=PUT", c.type = "POST") : "PATCH" === c.type && (c.url = c.url + f + "_method=PATCH", c.type = "POST"), b += 1, e = a('<iframe src="' + g + '" name="iframe-transport-' + b + '"></iframe>').bind("load", function () { var b, f = a.isArray(c.paramName) ? c.paramName : [c.paramName]; e.unbind("load").bind("load", function () { var b; try { if (b = e.contents(), !b.length || !b[0].firstChild) throw new Error } catch (c) { b = void 0 } i(200, "success", { iframe: b }), a('<iframe src="' + g + '"></iframe>').appendTo(d), window.setTimeout(function () { d.remove() }, 0) }), d.prop("target", e.prop("name")).prop("action", c.url).prop("method", c.type), c.formData && a.each(c.formData, function (b, c) { a('<input type="hidden"/>').prop("name", c.name).val(c.value).appendTo(d) }), c.fileInput && c.fileInput.length && "POST" === c.type && (b = c.fileInput.clone(), c.fileInput.after(function (a) { return b[a] }), c.paramName && c.fileInput.each(function (b) { a(this).prop("name", f[b] || c.paramName) }), d.append(c.fileInput).prop("enctype", "multipart/form-data").prop("encoding", "multipart/form-data")), d.submit(), b && b.length && c.fileInput.each(function (c, d) { var e = a(b[c]); a(d).prop("name", e.prop("name")), e.replaceWith(d) }) }), d.append(e).appendTo(document.body) }, abort: function () { e && e.unbind("load").prop("src", g), d && d.remove() } } } }), a.ajaxSetup({ converters: { "iframe text": function (b) { return b && a(b[0].body).text() }, "iframe json": function (b) { return b && a.parseJSON(a(b[0].body).text()) }, "iframe html": function (b) { return b && a(b[0].body).html() }, "iframe xml": function (b) { var c = b && b[0]; return c && a.isXMLDoc(c) ? c : a.parseXML(c.XMLDocument && c.XMLDocument.xml || a(c.body).html()) }, "iframe script": function (b) { return b && a.globalEval(a(b[0].body).text()) } } }) }), function (a) { "use strict"; "function" == typeof define && define.amd ? define(["jquery", "jquery.ui.widget"], a) : a(window.jQuery) }(function (a) { "use strict"; a.support.fileInput = !(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent) || a('<input type="file">').prop("disabled")), a.support.xhrFileUpload = !(!window.ProgressEvent || !window.FileReader), a.support.xhrFormDataFileUpload = !!window.FormData, a.support.blobSlice = window.Blob && (Blob.prototype.slice || Blob.prototype.webkitSlice || Blob.prototype.mozSlice), a.widget("blueimp.fileupload", { options: { dropZone: a(document), pasteZone: a(document), fileInput: void 0, replaceFileInput: !0, paramName: void 0, singleFileUploads: !0, limitMultiFileUploads: void 0, limitMultiFileUploadSize: void 0, limitMultiFileUploadSizeOverhead: 512, sequentialUploads: !1, limitConcurrentUploads: void 0, forceIframeTransport: !1, redirect: void 0, redirectParamName: void 0, postMessage: void 0, multipart: !0, maxChunkSize: void 0, uploadedBytes: void 0, recalculateProgress: !0, progressInterval: 100, bitrateInterval: 500, autoUpload: !0, messages: { uploadedBytes: "Uploaded bytes exceed file size" }, i18n: function (b, c) { return b = this.messages[b] || b.toString(), c && a.each(c, function (a, c) { b = b.replace("{" + a + "}", c) }), b }, formData: function (a) { return a.serializeArray() }, add: function (b, c) { return b.isDefaultPrevented() ? !1 : void ((c.autoUpload || c.autoUpload !== !1 && a(this).fileupload("option", "autoUpload")) && c.process().done(function () { c.submit() })) }, processData: !1, contentType: !1, cache: !1 }, _specialOptions: ["fileInput", "dropZone", "pasteZone", "multipart", "forceIframeTransport"], _blobSlice: a.support.blobSlice && function () { var a = this.slice || this.webkitSlice || this.mozSlice; return a.apply(this, arguments) }, _BitrateTimer: function () { this.timestamp = Date.now ? Date.now() : (new Date).getTime(), this.loaded = 0, this.bitrate = 0, this.getBitrate = function (a, b, c) { var d = a - this.timestamp; return (!this.bitrate || !c || d > c) && (this.bitrate = (b - this.loaded) * (1e3 / d) * 8, this.loaded = b, this.timestamp = a), this.bitrate } }, _isXHRUpload: function (b) { return !b.forceIframeTransport && (!b.multipart && a.support.xhrFileUpload || a.support.xhrFormDataFileUpload) }, _getFormData: function (b) { var c; return "function" === a.type(b.formData) ? b.formData(b.form) : a.isArray(b.formData) ? b.formData : "object" === a.type(b.formData) ? (c = [], a.each(b.formData, function (a, b) { c.push({ name: a, value: b }) }), c) : [] }, _getTotal: function (b) { var c = 0; return a.each(b, function (a, b) { c += b.size || 1 }), c }, _initProgressObject: function (b) { var c = { loaded: 0, total: 0, bitrate: 0 }; b._progress ? a.extend(b._progress, c) : b._progress = c }, _initResponseObject: function (a) { var b; if (a._response) for (b in a._response) a._response.hasOwnProperty(b) && delete a._response[b]; else a._response = {} }, _onProgress: function (b, c) { if (b.lengthComputable) { var d, e = Date.now ? Date.now() : (new Date).getTime(); if (c._time && c.progressInterval && e - c._time < c.progressInterval && b.loaded !== b.total) return; c._time = e, d = Math.floor(b.loaded / b.total * (c.chunkSize || c._progress.total)) + (c.uploadedBytes || 0), this._progress.loaded += d - c._progress.loaded, this._progress.bitrate = this._bitrateTimer.getBitrate(e, this._progress.loaded, c.bitrateInterval), c._progress.loaded = c.loaded = d, c._progress.bitrate = c.bitrate = c._bitrateTimer.getBitrate(e, d, c.bitrateInterval), this._trigger("progress", a.Event("progress", { delegatedEvent: b }), c), this._trigger("progressall", a.Event("progressall", { delegatedEvent: b }), this._progress) } }, _initProgressListener: function (b) { var c = this, d = b.xhr ? b.xhr() : a.ajaxSettings.xhr(); d.upload && (a(d.upload).bind("progress", function (a) { var d = a.originalEvent; a.lengthComputable = d.lengthComputable, a.loaded = d.loaded, a.total = d.total, c._onProgress(a, b) }), b.xhr = function () { return d }) }, _isInstanceOf: function (a, b) { return Object.prototype.toString.call(b) === "[object " + a + "]" }, _initXHRData: function (b) { var c, d = this, e = b.files[0], f = b.multipart || !a.support.xhrFileUpload, g = b.paramName[0]; b.headers = a.extend({}, b.headers), b.contentRange && (b.headers["Content-Range"] = b.contentRange), f && !b.blob && this._isInstanceOf("File", e) || (b.headers["Content-Disposition"] = 'attachment; filename="' + encodeURI(e.name) + '"'), f ? a.support.xhrFormDataFileUpload && (b.postMessage ? (c = this._getFormData(b), b.blob ? c.push({ name: g, value: b.blob }) : a.each(b.files, function (a, d) { c.push({ name: b.paramName[a] || g, value: d }) })) : (d._isInstanceOf("FormData", b.formData) ? c = b.formData : (c = new FormData, a.each(this._getFormData(b), function (a, b) { c.append(b.name, b.value) })), b.blob ? c.append(g, b.blob, e.name) : a.each(b.files, function (a, e) { (d._isInstanceOf("File", e) || d._isInstanceOf("Blob", e)) && c.append(b.paramName[a] || g, e, e.uploadName || e.name) })), b.data = c) : (b.contentType = e.type, b.data = b.blob || e), b.blob = null }, _initIframeSettings: function (b) { var c = a("<a></a>").prop("href", b.url).prop("host"); b.dataType = "iframe " + (b.dataType || ""), b.formData = this._getFormData(b), b.redirect && c && c !== location.host && b.formData.push({ name: b.redirectParamName || "redirect", value: b.redirect }) }, _initDataSettings: function (a) { this._isXHRUpload(a) ? (this._chunkedUpload(a, !0) || (a.data || this._initXHRData(a), this._initProgressListener(a)), a.postMessage && (a.dataType = "postmessage " + (a.dataType || ""))) : this._initIframeSettings(a) }, _getParamName: function (b) { var c = a(b.fileInput), d = b.paramName; return d ? a.isArray(d) || (d = [d]) : (d = [], c.each(function () { for (var b = a(this), c = b.prop("name") || "files[]", e = (b.prop("files") || [1]).length; e;)d.push(c), e -= 1 }), d.length || (d = [c.prop("name") || "files[]"])), d }, _initFormSettings: function (b) { b.form && b.form.length || (b.form = a(b.fileInput.prop("form")), b.form.length || (b.form = a(this.options.fileInput.prop("form")))), b.paramName = this._getParamName(b), b.url || (b.url = b.form.prop("action") || location.href), b.type = (b.type || "string" === a.type(b.form.prop("method")) && b.form.prop("method") || "").toUpperCase(), "POST" !== b.type && "PUT" !== b.type && "PATCH" !== b.type && (b.type = "POST"), b.formAcceptCharset || (b.formAcceptCharset = b.form.attr("accept-charset")) }, _getAJAXSettings: function (b) { var c = a.extend({}, this.options, b); return this._initFormSettings(c), this._initDataSettings(c), c }, _getDeferredState: function (a) { return a.state ? a.state() : a.isResolved() ? "resolved" : a.isRejected() ? "rejected" : "pending" }, _enhancePromise: function (a) { return a.success = a.done, a.error = a.fail, a.complete = a.always, a }, _getXHRPromise: function (b, c, d) { var e = a.Deferred(), f = e.promise(); return c = c || this.options.context || f, b === !0 ? e.resolveWith(c, d) : b === !1 && e.rejectWith(c, d), f.abort = e.promise, this._enhancePromise(f) }, _addConvenienceMethods: function (b, c) { var d = this, e = function (b) { return a.Deferred().resolveWith(d, b).promise() }; c.process = function (b, f) { return (b || f) && (c._processQueue = this._processQueue = (this._processQueue || e([this])).pipe(function () { return c.errorThrown ? a.Deferred().rejectWith(d, [c]).promise() : e(arguments) }).pipe(b, f)), this._processQueue || e([this]) }, c.submit = function () { return "pending" !== this.state() && (c.jqXHR = this.jqXHR = d._trigger("submit", a.Event("submit", { delegatedEvent: b }), this) !== !1 && d._onSend(b, this)), this.jqXHR || d._getXHRPromise() }, c.abort = function () { return this.jqXHR ? this.jqXHR.abort() : (this.errorThrown = "abort", d._trigger("fail", null, this), d._getXHRPromise(!1)) }, c.state = function () { return this.jqXHR ? d._getDeferredState(this.jqXHR) : this._processQueue ? d._getDeferredState(this._processQueue) : void 0 }, c.processing = function () { return !this.jqXHR && this._processQueue && "pending" === d._getDeferredState(this._processQueue) }, c.progress = function () { return this._progress }, c.response = function () { return this._response } }, _getUploadedBytes: function (a) { var b = a.getResponseHeader("Range"), c = b && b.split("-"), d = c && c.length > 1 && parseInt(c[1], 10); return d && d + 1 }, _chunkedUpload: function (b, c) { b.uploadedBytes = b.uploadedBytes || 0; var d, e, f = this, g = b.files[0], h = g.size, i = b.uploadedBytes, j = b.maxChunkSize || h, k = this._blobSlice, l = a.Deferred(), m = l.promise(); return this._isXHRUpload(b) && k && (i || h > j) && !b.data ? c ? !0 : i >= h ? (g.error = b.i18n("uploadedBytes"), this._getXHRPromise(!1, b.context, [null, "error", g.error])) : (e = function () { var c = a.extend({}, b), m = c._progress.loaded; c.blob = k.call(g, i, i + j, g.type), c.chunkSize = c.blob.size, c.contentRange = "bytes " + i + "-" + (i + c.chunkSize - 1) + "/" + h, f._initXHRData(c), f._initProgressListener(c), d = (f._trigger("chunksend", null, c) !== !1 && a.ajax(c) || f._getXHRPromise(!1, c.context)).done(function (d, g, j) { i = f._getUploadedBytes(j) || i + c.chunkSize, m + c.chunkSize - c._progress.loaded && f._onProgress(a.Event("progress", { lengthComputable: !0, loaded: i - c.uploadedBytes, total: i - c.uploadedBytes }), c), b.uploadedBytes = c.uploadedBytes = i, c.result = d, c.textStatus = g, c.jqXHR = j, f._trigger("chunkdone", null, c), f._trigger("chunkalways", null, c), h > i ? e() : l.resolveWith(c.context, [d, g, j]) }).fail(function (a, b, d) { c.jqXHR = a, c.textStatus = b, c.errorThrown = d, f._trigger("chunkfail", null, c), f._trigger("chunkalways", null, c), l.rejectWith(c.context, [a, b, d]) }) }, this._enhancePromise(m), m.abort = function () { return d.abort() }, e(), m) : !1 }, _beforeSend: function (a, b) { 0 === this._active && (this._trigger("start"), this._bitrateTimer = new this._BitrateTimer, this._progress.loaded = this._progress.total = 0, this._progress.bitrate = 0), this._initResponseObject(b), this._initProgressObject(b), b._progress.loaded = b.loaded = b.uploadedBytes || 0, b._progress.total = b.total = this._getTotal(b.files) || 1, b._progress.bitrate = b.bitrate = 0, this._active += 1, this._progress.loaded += b.loaded, this._progress.total += b.total }, _onDone: function (b, c, d, e) { var f = e._progress.total, g = e._response; e._progress.loaded < f && this._onProgress(a.Event("progress", { lengthComputable: !0, loaded: f, total: f }), e), g.result = e.result = b, g.textStatus = e.textStatus = c, g.jqXHR = e.jqXHR = d, this._trigger("done", null, e) }, _onFail: function (a, b, c, d) { var e = d._response; d.recalculateProgress && (this._progress.loaded -= d._progress.loaded, this._progress.total -= d._progress.total), e.jqXHR = d.jqXHR = a, e.textStatus = d.textStatus = b, e.errorThrown = d.errorThrown = c, this._trigger("fail", null, d) }, _onAlways: function (a, b, c, d) { this._trigger("always", null, d) }, _onSend: function (b, c) { c.submit || this._addConvenienceMethods(b, c); var d, e, f, g, h = this, i = h._getAJAXSettings(c), j = function () { return h._sending += 1, i._bitrateTimer = new h._BitrateTimer, d = d || ((e || h._trigger("send", a.Event("send", { delegatedEvent: b }), i) === !1) && h._getXHRPromise(!1, i.context, e) || h._chunkedUpload(i) || a.ajax(i)).done(function (a, b, c) { h._onDone(a, b, c, i) }).fail(function (a, b, c) { h._onFail(a, b, c, i) }).always(function (a, b, c) { if (h._onAlways(a, b, c, i), h._sending -= 1, h._active -= 1, i.limitConcurrentUploads && i.limitConcurrentUploads > h._sending) for (var d = h._slots.shift(); d;) { if ("pending" === h._getDeferredState(d)) { d.resolve(); break } d = h._slots.shift() } 0 === h._active && h._trigger("stop") }) }; return this._beforeSend(b, i), this.options.sequentialUploads || this.options.limitConcurrentUploads && this.options.limitConcurrentUploads <= this._sending ? (this.options.limitConcurrentUploads > 1 ? (f = a.Deferred(), this._slots.push(f), g = f.pipe(j)) : (this._sequence = this._sequence.pipe(j, j), g = this._sequence), g.abort = function () { return e = [void 0, "abort", "abort"], d ? d.abort() : (f && f.rejectWith(i.context, e), j()) }, this._enhancePromise(g)) : j() }, _onAdd: function (b, c) { var d, e, f, g, h = this, i = !0, j = a.extend({}, this.options, c), k = c.files, l = k.length, m = j.limitMultiFileUploads, n = j.limitMultiFileUploadSize, o = j.limitMultiFileUploadSizeOverhead, p = 0, q = this._getParamName(j), r = 0; if (!n || l && void 0 !== k[0].size || (n = void 0), (j.singleFileUploads || m || n) && this._isXHRUpload(j)) if (j.singleFileUploads || n || !m) if (!j.singleFileUploads && n) for (f = [], d = [], g = 0; l > g; g += 1)p += k[g].size + o, (g + 1 === l || p + k[g + 1].size + o > n) && (f.push(k.slice(r, g + 1)), e = q.slice(r, g + 1), e.length || (e = q), d.push(e), r = g + 1, p = 0); else d = q; else for (f = [], d = [], g = 0; l > g; g += m)f.push(k.slice(g, g + m)), e = q.slice(g, g + m), e.length || (e = q), d.push(e); else f = [k], d = [q]; return c.originalFiles = k, a.each(f || k, function (e, g) { var j = a.extend({}, c); return j.files = f ? g : [g], j.paramName = d[e], h._initResponseObject(j), h._initProgressObject(j), h._addConvenienceMethods(b, j), i = h._trigger("add", a.Event("add", { delegatedEvent: b }), j) }), i }, _replaceFileInput: function (b) { var c = b.clone(!0); a("<form></form>").append(c)[0].reset(), b.after(c).detach(), a.cleanData(b.unbind("remove")), this.options.fileInput = this.options.fileInput.map(function (a, d) { return d === b[0] ? c[0] : d }), b[0] === this.element[0] && (this.element = c) }, _handleFileTreeEntry: function (b, c) { var d, e = this, f = a.Deferred(), g = function (a) { a && !a.entry && (a.entry = b), f.resolve([a]) }; return c = c || "", b.isFile ? b._file ? (b._file.relativePath = c, f.resolve(b._file)) : b.file(function (a) { a.relativePath = c, f.resolve(a) }, g) : b.isDirectory ? (d = b.createReader(), d.readEntries(function (a) { e._handleFileTreeEntries(a, c + b.name + "/").done(function (a) { f.resolve(a) }).fail(g) }, g)) : f.resolve([]), f.promise() }, _handleFileTreeEntries: function (b, c) { var d = this; return a.when.apply(a, a.map(b, function (a) { return d._handleFileTreeEntry(a, c) })).pipe(function () { return Array.prototype.concat.apply([], arguments) }) }, _getDroppedFiles: function (b) { b = b || {}; var c = b.items; return c && c.length && (c[0].webkitGetAsEntry || c[0].getAsEntry) ? this._handleFileTreeEntries(a.map(c, function (a) { var b; return a.webkitGetAsEntry ? (b = a.webkitGetAsEntry(), b && (b._file = a.getAsFile()), b) : a.getAsEntry() })) : a.Deferred().resolve(a.makeArray(b.files)).promise() }, _getSingleFileInputFiles: function (b) { b = a(b); var c, d, e = b.prop("webkitEntries") || b.prop("entries"); if (e && e.length) return this._handleFileTreeEntries(e); if (c = a.makeArray(b.prop("files")), c.length) void 0 === c[0].name && c[0].fileName && a.each(c, function (a, b) { b.name = b.fileName, b.size = b.fileSize }); else { if (d = b.prop("value"), !d) return a.Deferred().resolve([]).promise(); c = [{ name: d.replace(/^.*\\/, "") }] } return a.Deferred().resolve(c).promise() }, _getFileInputFiles: function (b) { return b instanceof a && 1 !== b.length ? a.when.apply(a, a.map(b, this._getSingleFileInputFiles)).pipe(function () { return Array.prototype.concat.apply([], arguments) }) : this._getSingleFileInputFiles(b) }, _onChange: function (b) { var c = this, d = { fileInput: a(b.target), form: a(b.target.form) }; this._getFileInputFiles(d.fileInput).always(function (e) { d.files = e, c.options.replaceFileInput && c._replaceFileInput(d.fileInput), c._trigger("change", a.Event("change", { delegatedEvent: b }), d) !== !1 && c._onAdd(b, d) }) }, _onPaste: function (b) { var c = b.originalEvent && b.originalEvent.clipboardData && b.originalEvent.clipboardData.items, d = { files: [] }; c && c.length && (a.each(c, function (a, b) { var c = b.getAsFile && b.getAsFile(); c && d.files.push(c) }), this._trigger("paste", a.Event("paste", { delegatedEvent: b }), d) !== !1 && this._onAdd(b, d)) }, _onDrop: function (b) { b.dataTransfer = b.originalEvent && b.originalEvent.dataTransfer; var c = this, d = b.dataTransfer, e = {}; d && d.files && d.files.length && (b.preventDefault(), this._getDroppedFiles(d).always(function (d) { e.files = d, c._trigger("drop", a.Event("drop", { delegatedEvent: b }), e) !== !1 && c._onAdd(b, e) })) }, _onDragOver: function (b) { b.dataTransfer = b.originalEvent && b.originalEvent.dataTransfer; var c = b.dataTransfer; c && -1 !== a.inArray("Files", c.types) && this._trigger("dragover", a.Event("dragover", { delegatedEvent: b })) !== !1 && (b.preventDefault(), c.dropEffect = "copy") }, _initEventHandlers: function () { this._isXHRUpload(this.options) && (this._on(this.options.dropZone, { dragover: this._onDragOver, drop: this._onDrop }), this._on(this.options.pasteZone, { paste: this._onPaste })), a.support.fileInput && this._on(this.options.fileInput, { change: this._onChange }) }, _destroyEventHandlers: function () { this._off(this.options.dropZone, "dragover drop"), this._off(this.options.pasteZone, "paste"), this._off(this.options.fileInput, "change") }, _setOption: function (b, c) { var d = -1 !== a.inArray(b, this._specialOptions); d && this._destroyEventHandlers(), this._super(b, c), d && (this._initSpecialOptions(), this._initEventHandlers()) }, _initSpecialOptions: function () { var b = this.options; void 0 === b.fileInput ? b.fileInput = this.element.is('input[type="file"]') ? this.element : this.element.find('input[type="file"]') : b.fileInput instanceof a || (b.fileInput = a(b.fileInput)), b.dropZone instanceof a || (b.dropZone = a(b.dropZone)), b.pasteZone instanceof a || (b.pasteZone = a(b.pasteZone)) }, _getRegExp: function (a) { var b = a.split("/"), c = b.pop(); return b.shift(), new RegExp(b.join("/"), c) }, _isRegExpOption: function (b, c) { return "url" !== b && "string" === a.type(c) && /^\/.*\/[igm]{0,3}$/.test(c) }, _initDataAttributes: function () { var b = this, c = this.options; a.each(a(this.element[0].cloneNode(!1)).data(), function (a, d) { b._isRegExpOption(a, d) && (d = b._getRegExp(d)), c[a] = d }) }, _create: function () { this._initDataAttributes(), this._initSpecialOptions(), this._slots = [], this._sequence = this._getXHRPromise(!0), this._sending = this._active = 0, this._initProgressObject(this), this._initEventHandlers() }, active: function () { return this._active }, progress: function () { return this._progress }, add: function (b) { var c = this; b && !this.options.disabled && (b.fileInput && !b.files ? this._getFileInputFiles(b.fileInput).always(function (a) { b.files = a, c._onAdd(null, b) }) : (b.files = a.makeArray(b.files), this._onAdd(null, b))) }, send: function (b) { if (b && !this.options.disabled) { if (b.fileInput && !b.files) { var c, d, e = this, f = a.Deferred(), g = f.promise(); return g.abort = function () { return d = !0, c ? c.abort() : (f.reject(null, "abort", "abort"), g) }, this._getFileInputFiles(b.fileInput).always(function (a) { if (!d) { if (!a.length) return void f.reject(); b.files = a, c = e._onSend(null, b).then(function (a, b, c) { f.resolve(a, b, c) }, function (a, b, c) { f.reject(a, b, c) }) } }), this._enhancePromise(g) } if (b.files = a.makeArray(b.files), b.files.length) return this._onSend(null, b) } return this._getXHRPromise(!1, b && b.context) } }) }), function (a) { "use strict"; "function" == typeof define && define.amd ? define(["jquery", "./jquery.fileupload"], a) : a("object" == typeof exports ? require("jquery") : window.jQuery) }(function (a) { "use strict"; var b = a.blueimp.fileupload.prototype.options.add; a.widget("blueimp.fileupload", a.blueimp.fileupload, { options: { processQueue: [], add: function (c, d) { var e = a(this); d.process(function () { return e.fileupload("process", d) }), b.call(this, c, d) } }, processActions: {}, _processFile: function (b, c) { var d = this, e = a.Deferred().resolveWith(d, [b]), f = e.promise(); return this._trigger("process", null, b), a.each(b.processQueue, function (b, e) { var g = function (b) { return c.errorThrown ? a.Deferred().rejectWith(d, [c]).promise() : d.processActions[e.action].call(d, b, e) }; f = f.pipe(g, e.always && g) }), f.done(function () { d._trigger("processdone", null, b), d._trigger("processalways", null, b) }).fail(function () { d._trigger("processfail", null, b), d._trigger("processalways", null, b) }), f }, _transformProcessQueue: function (b) { var c = []; a.each(b.processQueue, function () { var d = {}, e = this.action, f = this.prefix === !0 ? e : this.prefix; a.each(this, function (c, e) { "string" === a.type(e) && "@" === e.charAt(0) ? d[c] = b[e.slice(1) || (f ? f + c.charAt(0).toUpperCase() + c.slice(1) : c)] : d[c] = e }), c.push(d) }), b.processQueue = c }, processing: function () { return this._processing }, process: function (b) { var c = this, d = a.extend({}, this.options, b); return d.processQueue && d.processQueue.length && (this._transformProcessQueue(d), 0 === this._processing && this._trigger("processstart"), a.each(b.files, function (e) { var f = e ? a.extend({}, d) : d, g = function () { return b.errorThrown ? a.Deferred().rejectWith(c, [b]).promise() : c._processFile(f, b) }; f.index = e, c._processing += 1, c._processingQueue = c._processingQueue.pipe(g, g).always(function () { c._processing -= 1, 0 === c._processing && c._trigger("processstop") }) })), this._processingQueue }, _create: function () { this._super(), this._processing = 0, this._processingQueue = a.Deferred().resolveWith(this).promise() } }) }), function (a) { "use strict"; "function" == typeof define && define.amd ? define(["jquery", "load-image", "load-image-meta", "load-image-exif", "load-image-ios", "canvas-to-blob", "./jquery.fileupload-process"], a) : "object" == typeof exports ? a(require("jquery"), require("load-image")) : a(window.jQuery, window.loadImage) }(function (a, b) { "use strict"; a.blueimp.fileupload.prototype.options.processQueue.unshift({ action: "loadImageMetaData", disableImageHead: "@", disableExif: "@", disableExifThumbnail: "@", disableExifSub: "@", disableExifGps: "@", disabled: "@disableImageMetaDataLoad" }, { action: "loadImage", prefix: !0, fileTypes: "@", maxFileSize: "@", noRevoke: "@", disabled: "@disableImageLoad" }, { action: "resizeImage", prefix: "image", maxWidth: "@", maxHeight: "@", minWidth: "@", minHeight: "@", crop: "@", orientation: "@", forceResize: "@", disabled: "@disableImageResize" }, { action: "saveImage", quality: "@imageQuality", type: "@imageType", disabled: "@disableImageResize" }, { action: "saveImageMetaData", disabled: "@disableImageMetaDataSave" }, { action: "resizeImage", prefix: "preview", maxWidth: "@", maxHeight: "@", minWidth: "@", minHeight: "@", crop: "@", orientation: "@", thumbnail: "@", canvas: "@", disabled: "@disableImagePreview" }, { action: "setImage", name: "@imagePreviewName", disabled: "@disableImagePreview" }, { action: "deleteImageReferences", disabled: "@disableImageReferencesDeletion" }), a.widget("blueimp.fileupload", a.blueimp.fileupload, { options: { loadImageFileTypes: /^image\/(gif|jpeg|png|svg\+xml)$/, loadImageMaxFileSize: 1e7, imageMaxWidth: 1920, imageMaxHeight: 1080, imageOrientation: !1, imageCrop: !1, disableImageResize: !0, previewMaxWidth: 80, previewMaxHeight: 80, previewOrientation: !0, previewThumbnail: !0, previewCrop: !1, previewCanvas: !0 }, processActions: { loadImage: function (c, d) { if (d.disabled) return c; var e = this, f = c.files[c.index], g = a.Deferred(); return "number" === a.type(d.maxFileSize) && f.size > d.maxFileSize || d.fileTypes && !d.fileTypes.test(f.type) || !b(f, function (a) { a.src && (c.img = a), g.resolveWith(e, [c]) }, d) ? c : g.promise() }, resizeImage: function (c, d) { if (d.disabled || !c.canvas && !c.img) return c; d = a.extend({ canvas: !0 }, d); var e, f = this, g = a.Deferred(), h = d.canvas && c.canvas || c.img, i = function (a) { a && (a.width !== h.width || a.height !== h.height || d.forceResize) && (c[a.getContext ? "canvas" : "img"] = a), c.preview = a, g.resolveWith(f, [c]) }; if (c.exif) { if (d.orientation === !0 && (d.orientation = c.exif.get("Orientation")), d.thumbnail && (e = c.exif.get("Thumbnail"))) return b(e, i, d), g.promise(); c.orientation ? delete d.orientation : c.orientation = d.orientation } return h ? (i(b.scale(h, d)), g.promise()) : c }, saveImage: function (b, c) { if (!b.canvas || c.disabled) return b; var d = this, e = b.files[b.index], f = a.Deferred(); return b.canvas.toBlob ? (b.canvas.toBlob(function (a) { a.name || (e.type === a.type ? a.name = e.name : e.name && (a.name = e.name.replace(/\.\w+$/, "." + a.type.substr(6)))), e.type !== a.type && delete b.imageHead, b.files[b.index] = a, f.resolveWith(d, [b]) }, c.type || e.type, c.quality), f.promise()) : b }, loadImageMetaData: function (c, d) { if (d.disabled) return c; var e = this, f = a.Deferred(); return b.parseMetaData(c.files[c.index], function (b) { a.extend(c, b), f.resolveWith(e, [c]) }, d), f.promise() }, saveImageMetaData: function (a, b) { if (!(a.imageHead && a.canvas && a.canvas.toBlob) || b.disabled) return a; var c = a.files[a.index], d = new Blob([a.imageHead, this._blobSlice.call(c, 20)], { type: c.type }); return d.name = c.name, a.files[a.index] = d, a }, setImage: function (a, b) { return a.preview && !b.disabled && (a.files[a.index][b.name || "preview"] = a.preview), a }, deleteImageReferences: function (a, b) { return b.disabled || (delete a.img, delete a.canvas, delete a.preview, delete a.imageHead), a } } }) });

!function (a, b) { "use strict"; function c(a, c) { var e = this; c = b.extend({ mode: "menu", upload_token: "", uploadElement: "body", bulkParameterName: "fID" }, c), e.options = c, e._templateFileProgress = _.template('<div id="ccm-file-upload-progress" class="ccm-ui"><div id="ccm-file-upload-progress-bar"><div class="progress progress-striped active"><div class="progress-bar" style="width: <%=progress%>%;"></div></div></div></div>'), e._templateSearchResultsMenu = _.template(d.get()), ConcreteAjaxSearch.call(e, a, c), e.setupFileDownloads(), e.setupFileUploads(), e.setupEvents(), "menu" === c.mode && b('.ccm-search-bulk-action option[value="choose"]').remove() } c.prototype = Object.create(ConcreteAjaxSearch.prototype), c.prototype.setupFileDownloads = function () { var a = this; b("#ccm-file-manager-download-target").length ? a.$downloadTarget = b("#ccm-file-manager-download-target") : a.$downloadTarget = b("<iframe />", { name: "ccm-file-manager-download-target", id: "ccm-file-manager-download-target" }).appendTo(document.body) }, c.prototype.setupFileUploads = function () { var a = this, c = b(".ccm-file-manager-upload"), d = c.filter("#ccm-file-manager-upload-prompt"), e = c.data("image-max-width"), f = c.data("image-max-height"), g = e > 0 && f > 0, h = c.data("image-quality"), i = [], j = [], k = _.template("<ul><% _(errors).each(function(error) { %><li><strong><%- error.name %></strong><p><%- error.error %></p></li><% }) %></ul>"), l = { url: CCM_DISPATCHER_FILENAME + "/ccm/system/file/upload", dataType: "json", formData: { ccm_token: a.options.upload_token }, disableImageResize: !g, imageQuality: h > 0 ? h : 85, imageMaxWidth: e > 0 ? e : 1920, imageMaxHeight: f > 0 ? f : 1080, error: function (a) { var b = a.responseText; try { b = jQuery.parseJSON(b).errors; var c = this.files[0].name; _(b).each(function (a) { i.push({ name: c, error: a }) }) } catch (d) { } }, progressall: function (c, d) { var e = parseInt(d.loaded / d.total * 100, 10); b("#ccm-file-upload-progress-wrapper").html(a._templateFileProgress({ progress: e })) }, start: function () { i = [], b("<div />", { id: "ccm-file-upload-progress-wrapper" }).html(a._templateFileProgress({ progress: 100 })).appendTo(document.body), b.fn.dialog.open({ title: ccmi18n_filemanager.uploadProgress, width: 400, height: 50, onClose: function (a) { a.jqdialog("destroy").remove() }, element: b("#ccm-file-upload-progress-wrapper"), modal: !0 }) }, done: function (a, b) { j.push(b.result[0]) }, stop: function () { if (jQuery.fn.dialog.closeTop(), i.length) ConcreteAlert.dialog(ccmi18n_filemanager.uploadFailed, k({ errors: i })); else { var b = !1; _.each(j, function (a) { a.canEditFileProperties && (b = !0) }), b ? a._launchUploadCompleteDialog(j) : a.refreshResults(), j = [] } } }; d = d.length ? d : c.first(), d.fileupload(l) }, c.prototype._launchUploadCompleteDialog = function (a) { var b = this; c.launchUploadCompleteDialog(a, b) }, c.prototype.setupEvents = function () { var a = this; ConcreteEvent.unsubscribe("FileManagerAddFilesComplete"), ConcreteEvent.subscribe("FileManagerAddFilesComplete", function (b, c) { a._launchUploadCompleteDialog(c.files) }), ConcreteEvent.unsubscribe("FileManagerDeleteFilesComplete"), ConcreteEvent.subscribe("FileManagerDeleteFilesComplete", function (b, c) { a.refreshResults() }) }, c.prototype.setupStarredResults = function () { var a = this; a.$element.unbind(".concreteFileManagerStar").on("click.concreteFileManagerStar", "a[data-search-toggle=star]", function () { var c = b(this), d = { fID: b(this).attr("data-search-toggle-file-id") }; return a.ajaxUpdate(c.attr("data-search-toggle-url"), d, function (a) { a.star ? c.parent().addClass("ccm-file-manager-search-results-star-active") : c.parent().removeClass("ccm-file-manager-search-results-star-active") }), !1 }) }, c.prototype.updateResults = function (a) { var c = this; ConcreteAjaxSearch.prototype.updateResults.call(c, a), c.setupStarredResults(), "choose" == c.options.mode && (c.$element.unbind(".concreteFileManagerHoverFile"), c.$element.on("mouseover.concreteFileManagerHoverFile", "tr[data-file-manager-file]", function () { b(this).addClass("ccm-search-select-hover") }), c.$element.on("mouseout.concreteFileManagerHoverFile", "tr[data-file-manager-file]", function () { b(this).removeClass("ccm-search-select-hover") }), c.$element.unbind(".concreteFileManagerChooseFile").on("click.concreteFileManagerChooseFile", "tr[data-file-manager-file]", function (a) { return "checkbox" !== b(a.target).prop("type") ? (ConcreteEvent.publish("FileManagerBeforeSelectFile", { fID: b(this).attr("data-file-manager-file") }), ConcreteEvent.publish("FileManagerSelectFile", { fID: b(this).attr("data-file-manager-file") }), c.$downloadTarget.remove(), !1) : void 0 })) }, c.prototype.handleSelectedBulkAction = function (a, c, d, e) { var f = this, g = []; if (b.each(e, function (a, c) { g.push({ name: "item[]", value: b(c).val() }) }), "choose" == a) { var h = g.map(function (a) { return a.value }); ConcreteEvent.publish("FileManagerBeforeSelectFile", { fID: h }), ConcreteEvent.publish("FileManagerSelectFile", { fID: h }) } else "download" == a ? f.$downloadTarget.get(0).src = CCM_TOOLS_PATH + "/files/download?" + jQuery.param(g) : ConcreteAjaxSearch.prototype.handleSelectedBulkAction.call(this, a, c, d, e) }, ConcreteAjaxSearch.prototype.createMenu = function (a) { var c = this; a.concreteFileMenu({ container: c, menu: b("[data-search-menu=" + a.attr("data-launch-search-menu") + "]") }) }, c.launchDialog = function (a, c) { var d, e = b(window).width() - 53, f = {}, g = { filters: [], multipleSelection: !1 }; if (b.extend(g, c), g.filters.length > 0) for (f["field[]"] = [], d = 0; d < g.filters.length; d++) { var h = b.extend(!0, {}, g.filters[d]); f["field[]"].push(h.field), delete h.field, b.extend(f, h) } b.fn.dialog.open({ width: e, height: "100%", href: CCM_DISPATCHER_FILENAME + "/ccm/system/dialogs/file/search", modal: !0, data: f, title: ccmi18n_filemanager.title, onOpen: function (c) { ConcreteEvent.unsubscribe("FileManagerSelectFile"), ConcreteEvent.subscribe("FileManagerSelectFile", function (c, d) { var e = "[object Array]" === Object.prototype.toString.call(d.fID); if (g.multipleSelection && !e) d.fID = [d.fID]; else if (!g.multipleSelection && e) { if (d.fID.length > 1) return b(".ccm-search-bulk-action option:first-child").prop("selected", "selected"), void alert(ccmi18n_filemanager.chosenTooMany); d.fID = d.fID[0] } jQuery.fn.dialog.closeTop(), a(d) }) } }) }, c.launchUploadCompleteDialog = function (a, c) { if (a && a.length && a.length > 0) { var d = ""; _.each(a, function (a) { d += "fID[]=" + a.fID + "&" }), d = d.substring(0, d.length - 1), b.fn.dialog.open({ width: "660", height: "500", href: CCM_DISPATCHER_FILENAME + "/ccm/system/dialogs/file/upload_complete", modal: !0, data: d, onClose: function () { var a = { filemanager: c }; ConcreteEvent.publish("FileManagerUploadCompleteDialogClose", a) }, onOpen: function () { var a = { filemanager: c }; ConcreteEvent.publish("FileManagerUploadCompleteDialogOpen", a) }, title: ccmi18n_filemanager.uploadComplete }) } }, c.getFileDetails = function (a, c) { b.ajax({ type: "post", dataType: "json", url: CCM_DISPATCHER_FILENAME + "/ccm/system/file/get_json", data: { fID: a }, error: function (a) { ConcreteAlert.dialog("Error", a.responseText) }, success: function (a) { c(a) } }) }; var d = { get: function () { return '<div class="ccm-ui"><div class="ccm-popover-file-menu popover fade" data-search-file-menu="<%=item.fID%>" data-search-menu="<%=item.fID%>"><div class="arrow"></div><div class="popover-inner"><ul class="dropdown-menu"><% if (typeof(displayClear) != \'undefined\' && displayClear) { %><li><a href="#" data-file-manager-action="clear">' + ccmi18n_filemanager.clear + '</a></li><li class="divider"></li><% } %><% if (item.canViewFile && item.canRead) { %><li><a class="dialog-launch" dialog-modal="false" dialog-append-buttons="true" dialog-width="90%" dialog-height="75%" dialog-title="' + ccmi18n_filemanager.view + '" href="' + CCM_TOOLS_PATH + '/files/view?fID=<%=item.fID%>">' + ccmi18n_filemanager.view + "</a></li><% } %><% if (item.canRead) { %><li><a href=\"#\" onclick=\"window.frames['ccm-file-manager-download-target'].location='" + CCM_TOOLS_PATH + "/files/download?fID=<%=item.fID%>'; return false\">" + ccmi18n_filemanager.download + '</a></li><% } %><% if (item.canEditFile && item.canEditFileContents) { %><li><a class="dialog-launch" dialog-modal="true" dialog-width="90%" dialog-height="70%" dialog-title="' + ccmi18n_filemanager.edit + '" href="' + CCM_TOOLS_PATH + '/files/edit?fID=<%=item.fID%>">' + ccmi18n_filemanager.edit + '</a></li><li><a class="dialog-launch" dialog-modal="true" dialog-width="90%" dialog-height="70%" dialog-title="' + ccmi18n_filemanager.thumbnailImages + '" href="' + CCM_DISPATCHER_FILENAME + '/ccm/system/dialogs/file/thumbnails?fID=<%=item.fID%>">' + ccmi18n_filemanager.thumbnailImages + '</a></li><% } %><li><a class="dialog-launch" dialog-modal="true" dialog-width="850" dialog-height="450" dialog-title="' + ccmi18n_filemanager.properties + '" href="' + CCM_DISPATCHER_FILENAME + '/ccm/system/dialogs/file/properties?fID=<%=item.fID%>">' + ccmi18n_filemanager.properties + '</a></li><% if (item.canReplaceFile) { %><li><a class="dialog-launch" dialog-modal="true" dialog-width="500" dialog-height="200" dialog-title="' + ccmi18n_filemanager.replace + '" href="' + CCM_TOOLS_PATH + '/files/replace?fID=<%=item.fID%>">' + ccmi18n_filemanager.replace + '</a></li><% } %><% if (item.canCopyFile) { %><li><a href="#" data-file-manager-action="duplicate">' + ccmi18n_filemanager.duplicate + '</a></li><% } %><li><a class="dialog-launch" dialog-modal="true" dialog-width="500" dialog-height="400" dialog-title="' + ccmi18n_filemanager.sets + '" href="' + CCM_DISPATCHER_FILENAME + '/ccm/system/dialogs/file/sets?fID=<%=item.fID%>">' + ccmi18n_filemanager.sets + '</a></li><% if (item.canDeleteFile || item.canEditFilePermissions) { %><li class="divider"></li><% } %><% if (item.canEditFilePermissions) { %><li><a class="dialog-launch" dialog-modal="true" dialog-width="520" dialog-height="450" dialog-title="' + ccmi18n_filemanager.permissions + '" href="' + CCM_TOOLS_PATH + '/files/permissions?fID=<%=item.fID%>">' + ccmi18n_filemanager.permissions + '</a></li><% } %><% if (item.canDeleteFile) { %><li><a class="dialog-launch" dialog-modal="true" dialog-width="500" dialog-height="200" dialog-title="' + ccmi18n_filemanager.deleteFile + '" href="' + CCM_TOOLS_PATH + '/files/delete?fID=<%=item.fID%>">' + ccmi18n_filemanager.deleteFile + "</a></li><% } %></ul></div></div>" } }; b.fn.concreteFileManager = function (a) { return b.each(b(this), function (d, e) { new c(b(this), a) }) }, a.ConcreteFileManager = c, a.ConcreteFileManagerMenu = d }(window, $), !function (a, b) { "use strict"; function c(a, c) { var d = this, c = b.extend({ chooseText: ccmi18n_filemanager.chooseNew, inputName: "concreteFile", fID: !1, filters: [] }, c), e = {}; e.filters = c.filters, d.$element = a, d.options = c, d._chooseTemplate = _.template(d.chooseTemplate, { options: d.options }), d._loadingTemplate = _.template(d.loadingTemplate), d._fileLoadedTemplate = _.template(d.fileLoadedTemplate), d._fileMenuTemplate = _.template(ConcreteFileManagerMenu.get()), d.$element.append(d._chooseTemplate), d.$element.on("click", "div.ccm-file-selector-choose-new", function () { return ConcreteFileManager.launchDialog(function (a) { d.loadFile(a.fID) }, e), !1 }), d.options.fID && d.loadFile(d.options.fID) } c.prototype = { chooseTemplate: '<div class="ccm-file-selector-choose-new"><input type="hidden" name="<%=options.inputName%>" value="0" /><%=options.chooseText%></div>', loadingTemplate: '<div class="ccm-file-selector-loading"><img src="' + CCM_IMAGE_PATH + '/throbber_white_16.gif" /></div>', fileLoadedTemplate: '<div class="ccm-file-selector-file-selected"><input type="hidden" name="<%=inputName%>" value="<%=file.fID%>" /><div class="ccm-file-selector-file-selected-thumbnail"><%=file.resultsThumbnailImg%></div><div class="ccm-file-selector-file-selected-title"><div><%=file.title%></div></div><div class="clearfix"></div></div>', loadFile: function (a) { var c = this; c.$element.html(c._loadingTemplate), ConcreteFileManager.getFileDetails(a, function (a) { var d = a.files[0]; c.$element.html(c._fileLoadedTemplate({ inputName: c.options.inputName, file: d })), c.$element.append(c._fileMenuTemplate({ displayClear: !0, item: d })), c.$element.find(".ccm-file-selector-file-selected").concreteFileMenu({ container: c, menu: b("[data-search-file-menu=" + d.fID + "]"), menuLauncherHoverClass: "ccm-file-manager-menu-item-hover" }) }) } }, b.fn.concreteFileSelector = function (a) { return b.each(b(this), function (d, e) { new c(b(this), a) }) }, a.ConcreteFileSelector = c }(this, $), !function (a, b, c) { "use strict"; function d(a, c) { var d = this, c = c || {}; c = b.extend({ container: !1 }, c), ConcreteMenu.call(d, a, c) } d.prototype = Object.create(ConcreteMenu.prototype), d.prototype.setupMenuOptions = function (a) { var d = this, e = ConcreteMenu.prototype, f = a.attr("data-search-file-menu"), g = d.options.container; e.setupMenuOptions(a), a.find("a[data-file-manager-action=clear]").on("click", function () { var a = ConcreteMenuManager.getActiveMenu(); return a && a.hide(), c.defer(function () { g.$element.html(g._chooseTemplate) }), !1 }), a.find("a[data-file-manager-action=duplicate]").on("click", function () { return b.concreteAjax({ url: CCM_DISPATCHER_FILENAME + "/ccm/system/file/duplicate", data: { fID: f }, success: function (a) { "undefined" != typeof g.refreshResults && g.refreshResults() } }), !1 }) }, b.fn.concreteFileMenu = function (a) { return b.each(b(this), function (c, e) { new d(b(this), a) }) }, a.ConcreteFileMenu = d }(this, $, _);

/*!
 * Masonry PACKAGED v4.1.1
 * Cascading grid layout library
 * http://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */

!function (t, e) { "function" == typeof define && define.amd ? define("jquery-bridget/jquery-bridget", ["jquery"], function (i) { return e(t, i) }) : "object" == typeof module && module.exports ? module.exports = e(t, require("jquery")) : t.jQueryBridget = e(t, t.jQuery) }(window, function (t, e) { "use strict"; function i(i, r, a) { function h(t, e, n) { var o, r = "$()." + i + '("' + e + '")'; return t.each(function (t, h) { var u = a.data(h, i); if (!u) return void s(i + " not initialized. Cannot call methods, i.e. " + r); var d = u[e]; if (!d || "_" == e.charAt(0)) return void s(r + " is not a valid method"); var l = d.apply(u, n); o = void 0 === o ? l : o }), void 0 !== o ? o : t } function u(t, e) { t.each(function (t, n) { var o = a.data(n, i); o ? (o.option(e), o._init()) : (o = new r(n, e), a.data(n, i, o)) }) } a = a || e || t.jQuery, a && (r.prototype.option || (r.prototype.option = function (t) { a.isPlainObject(t) && (this.options = a.extend(!0, this.options, t)) }), a.fn[i] = function (t) { if ("string" == typeof t) { var e = o.call(arguments, 1); return h(this, t, e) } return u(this, t), this }, n(a)) } function n(t) { !t || t && t.bridget || (t.bridget = i) } var o = Array.prototype.slice, r = t.console, s = "undefined" == typeof r ? function () { } : function (t) { r.error(t) }; return n(e || t.jQuery), i }), function (t, e) { "function" == typeof define && define.amd ? define("ev-emitter/ev-emitter", e) : "object" == typeof module && module.exports ? module.exports = e() : t.EvEmitter = e() }("undefined" != typeof window ? window : this, function () { function t() { } var e = t.prototype; return e.on = function (t, e) { if (t && e) { var i = this._events = this._events || {}, n = i[t] = i[t] || []; return -1 == n.indexOf(e) && n.push(e), this } }, e.once = function (t, e) { if (t && e) { this.on(t, e); var i = this._onceEvents = this._onceEvents || {}, n = i[t] = i[t] || {}; return n[e] = !0, this } }, e.off = function (t, e) { var i = this._events && this._events[t]; if (i && i.length) { var n = i.indexOf(e); return -1 != n && i.splice(n, 1), this } }, e.emitEvent = function (t, e) { var i = this._events && this._events[t]; if (i && i.length) { var n = 0, o = i[n]; e = e || []; for (var r = this._onceEvents && this._onceEvents[t]; o;) { var s = r && r[o]; s && (this.off(t, o), delete r[o]), o.apply(this, e), n += s ? 0 : 1, o = i[n] } return this } }, t }), function (t, e) { "use strict"; "function" == typeof define && define.amd ? define("get-size/get-size", [], function () { return e() }) : "object" == typeof module && module.exports ? module.exports = e() : t.getSize = e() }(window, function () { "use strict"; function t(t) { var e = parseFloat(t), i = -1 == t.indexOf("%") && !isNaN(e); return i && e } function e() { } function i() { for (var t = { width: 0, height: 0, innerWidth: 0, innerHeight: 0, outerWidth: 0, outerHeight: 0 }, e = 0; u > e; e++) { var i = h[e]; t[i] = 0 } return t } function n(t) { var e = getComputedStyle(t); return e || a("Style returned " + e + ". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"), e } function o() { if (!d) { d = !0; var e = document.createElement("div"); e.style.width = "200px", e.style.padding = "1px 2px 3px 4px", e.style.borderStyle = "solid", e.style.borderWidth = "1px 2px 3px 4px", e.style.boxSizing = "border-box"; var i = document.body || document.documentElement; i.appendChild(e); var o = n(e); r.isBoxSizeOuter = s = 200 == t(o.width), i.removeChild(e) } } function r(e) { if (o(), "string" == typeof e && (e = document.querySelector(e)), e && "object" == typeof e && e.nodeType) { var r = n(e); if ("none" == r.display) return i(); var a = {}; a.width = e.offsetWidth, a.height = e.offsetHeight; for (var d = a.isBorderBox = "border-box" == r.boxSizing, l = 0; u > l; l++) { var c = h[l], f = r[c], m = parseFloat(f); a[c] = isNaN(m) ? 0 : m } var p = a.paddingLeft + a.paddingRight, g = a.paddingTop + a.paddingBottom, y = a.marginLeft + a.marginRight, v = a.marginTop + a.marginBottom, _ = a.borderLeftWidth + a.borderRightWidth, E = a.borderTopWidth + a.borderBottomWidth, z = d && s, b = t(r.width); b !== !1 && (a.width = b + (z ? 0 : p + _)); var x = t(r.height); return x !== !1 && (a.height = x + (z ? 0 : g + E)), a.innerWidth = a.width - (p + _), a.innerHeight = a.height - (g + E), a.outerWidth = a.width + y, a.outerHeight = a.height + v, a } } var s, a = "undefined" == typeof console ? e : function (t) { console.error(t) }, h = ["paddingLeft", "paddingRight", "paddingTop", "paddingBottom", "marginLeft", "marginRight", "marginTop", "marginBottom", "borderLeftWidth", "borderRightWidth", "borderTopWidth", "borderBottomWidth"], u = h.length, d = !1; return r }), function (t, e) { "use strict"; "function" == typeof define && define.amd ? define("desandro-matches-selector/matches-selector", e) : "object" == typeof module && module.exports ? module.exports = e() : t.matchesSelector = e() }(window, function () { "use strict"; var t = function () { var t = Element.prototype; if (t.matches) return "matches"; if (t.matchesSelector) return "matchesSelector"; for (var e = ["webkit", "moz", "ms", "o"], i = 0; i < e.length; i++) { var n = e[i], o = n + "MatchesSelector"; if (t[o]) return o } }(); return function (e, i) { return e[t](i) } }), function (t, e) { "function" == typeof define && define.amd ? define("fizzy-ui-utils/utils", ["desandro-matches-selector/matches-selector"], function (i) { return e(t, i) }) : "object" == typeof module && module.exports ? module.exports = e(t, require("desandro-matches-selector")) : t.fizzyUIUtils = e(t, t.matchesSelector) }(window, function (t, e) { var i = {}; i.extend = function (t, e) { for (var i in e) t[i] = e[i]; return t }, i.modulo = function (t, e) { return (t % e + e) % e }, i.makeArray = function (t) { var e = []; if (Array.isArray(t)) e = t; else if (t && "number" == typeof t.length) for (var i = 0; i < t.length; i++)e.push(t[i]); else e.push(t); return e }, i.removeFrom = function (t, e) { var i = t.indexOf(e); -1 != i && t.splice(i, 1) }, i.getParent = function (t, i) { for (; t != document.body;)if (t = t.parentNode, e(t, i)) return t }, i.getQueryElement = function (t) { return "string" == typeof t ? document.querySelector(t) : t }, i.handleEvent = function (t) { var e = "on" + t.type; this[e] && this[e](t) }, i.filterFindElements = function (t, n) { t = i.makeArray(t); var o = []; return t.forEach(function (t) { if (t instanceof HTMLElement) { if (!n) return void o.push(t); e(t, n) && o.push(t); for (var i = t.querySelectorAll(n), r = 0; r < i.length; r++)o.push(i[r]) } }), o }, i.debounceMethod = function (t, e, i) { var n = t.prototype[e], o = e + "Timeout"; t.prototype[e] = function () { var t = this[o]; t && clearTimeout(t); var e = arguments, r = this; this[o] = setTimeout(function () { n.apply(r, e), delete r[o] }, i || 100) } }, i.docReady = function (t) { var e = document.readyState; "complete" == e || "interactive" == e ? t() : document.addEventListener("DOMContentLoaded", t) }, i.toDashed = function (t) { return t.replace(/(.)([A-Z])/g, function (t, e, i) { return e + "-" + i }).toLowerCase() }; var n = t.console; return i.htmlInit = function (e, o) { i.docReady(function () { var r = i.toDashed(o), s = "data-" + r, a = document.querySelectorAll("[" + s + "]"), h = document.querySelectorAll(".js-" + r), u = i.makeArray(a).concat(i.makeArray(h)), d = s + "-options", l = t.jQuery; u.forEach(function (t) { var i, r = t.getAttribute(s) || t.getAttribute(d); try { i = r && JSON.parse(r) } catch (a) { return void (n && n.error("Error parsing " + s + " on " + t.className + ": " + a)) } var h = new e(t, i); l && l.data(t, o, h) }) }) }, i }), function (t, e) { "function" == typeof define && define.amd ? define("outlayer/item", ["ev-emitter/ev-emitter", "get-size/get-size"], e) : "object" == typeof module && module.exports ? module.exports = e(require("ev-emitter"), require("get-size")) : (t.Outlayer = {}, t.Outlayer.Item = e(t.EvEmitter, t.getSize)) }(window, function (t, e) { "use strict"; function i(t) { for (var e in t) return !1; return e = null, !0 } function n(t, e) { t && (this.element = t, this.layout = e, this.position = { x: 0, y: 0 }, this._create()) } function o(t) { return t.replace(/([A-Z])/g, function (t) { return "-" + t.toLowerCase() }) } var r = document.documentElement.style, s = "string" == typeof r.transition ? "transition" : "WebkitTransition", a = "string" == typeof r.transform ? "transform" : "WebkitTransform", h = { WebkitTransition: "webkitTransitionEnd", transition: "transitionend" }[s], u = { transform: a, transition: s, transitionDuration: s + "Duration", transitionProperty: s + "Property", transitionDelay: s + "Delay" }, d = n.prototype = Object.create(t.prototype); d.constructor = n, d._create = function () { this._transn = { ingProperties: {}, clean: {}, onEnd: {} }, this.css({ position: "absolute" }) }, d.handleEvent = function (t) { var e = "on" + t.type; this[e] && this[e](t) }, d.getSize = function () { this.size = e(this.element) }, d.css = function (t) { var e = this.element.style; for (var i in t) { var n = u[i] || i; e[n] = t[i] } }, d.getPosition = function () { var t = getComputedStyle(this.element), e = this.layout._getOption("originLeft"), i = this.layout._getOption("originTop"), n = t[e ? "left" : "right"], o = t[i ? "top" : "bottom"], r = this.layout.size, s = -1 != n.indexOf("%") ? parseFloat(n) / 100 * r.width : parseInt(n, 10), a = -1 != o.indexOf("%") ? parseFloat(o) / 100 * r.height : parseInt(o, 10); s = isNaN(s) ? 0 : s, a = isNaN(a) ? 0 : a, s -= e ? r.paddingLeft : r.paddingRight, a -= i ? r.paddingTop : r.paddingBottom, this.position.x = s, this.position.y = a }, d.layoutPosition = function () { var t = this.layout.size, e = {}, i = this.layout._getOption("originLeft"), n = this.layout._getOption("originTop"), o = i ? "paddingLeft" : "paddingRight", r = i ? "left" : "right", s = i ? "right" : "left", a = this.position.x + t[o]; e[r] = this.getXValue(a), e[s] = ""; var h = n ? "paddingTop" : "paddingBottom", u = n ? "top" : "bottom", d = n ? "bottom" : "top", l = this.position.y + t[h]; e[u] = this.getYValue(l), e[d] = "", this.css(e), this.emitEvent("layout", [this]) }, d.getXValue = function (t) { var e = this.layout._getOption("horizontal"); return this.layout.options.percentPosition && !e ? t / this.layout.size.width * 100 + "%" : t + "px" }, d.getYValue = function (t) { var e = this.layout._getOption("horizontal"); return this.layout.options.percentPosition && e ? t / this.layout.size.height * 100 + "%" : t + "px" }, d._transitionTo = function (t, e) { this.getPosition(); var i = this.position.x, n = this.position.y, o = parseInt(t, 10), r = parseInt(e, 10), s = o === this.position.x && r === this.position.y; if (this.setPosition(t, e), s && !this.isTransitioning) return void this.layoutPosition(); var a = t - i, h = e - n, u = {}; u.transform = this.getTranslate(a, h), this.transition({ to: u, onTransitionEnd: { transform: this.layoutPosition }, isCleaning: !0 }) }, d.getTranslate = function (t, e) { var i = this.layout._getOption("originLeft"), n = this.layout._getOption("originTop"); return t = i ? t : -t, e = n ? e : -e, "translate3d(" + t + "px, " + e + "px, 0)" }, d.goTo = function (t, e) { this.setPosition(t, e), this.layoutPosition() }, d.moveTo = d._transitionTo, d.setPosition = function (t, e) { this.position.x = parseInt(t, 10), this.position.y = parseInt(e, 10) }, d._nonTransition = function (t) { this.css(t.to), t.isCleaning && this._removeStyles(t.to); for (var e in t.onTransitionEnd) t.onTransitionEnd[e].call(this) }, d.transition = function (t) { if (!parseFloat(this.layout.options.transitionDuration)) return void this._nonTransition(t); var e = this._transn; for (var i in t.onTransitionEnd) e.onEnd[i] = t.onTransitionEnd[i]; for (i in t.to) e.ingProperties[i] = !0, t.isCleaning && (e.clean[i] = !0); if (t.from) { this.css(t.from); var n = this.element.offsetHeight; n = null } this.enableTransition(t.to), this.css(t.to), this.isTransitioning = !0 }; var l = "opacity," + o(a); d.enableTransition = function () { if (!this.isTransitioning) { var t = this.layout.options.transitionDuration; t = "number" == typeof t ? t + "ms" : t, this.css({ transitionProperty: l, transitionDuration: t, transitionDelay: this.staggerDelay || 0 }), this.element.addEventListener(h, this, !1) } }, d.onwebkitTransitionEnd = function (t) { this.ontransitionend(t) }, d.onotransitionend = function (t) { this.ontransitionend(t) }; var c = { "-webkit-transform": "transform" }; d.ontransitionend = function (t) { if (t.target === this.element) { var e = this._transn, n = c[t.propertyName] || t.propertyName; if (delete e.ingProperties[n], i(e.ingProperties) && this.disableTransition(), n in e.clean && (this.element.style[t.propertyName] = "", delete e.clean[n]), n in e.onEnd) { var o = e.onEnd[n]; o.call(this), delete e.onEnd[n] } this.emitEvent("transitionEnd", [this]) } }, d.disableTransition = function () { this.removeTransitionStyles(), this.element.removeEventListener(h, this, !1), this.isTransitioning = !1 }, d._removeStyles = function (t) { var e = {}; for (var i in t) e[i] = ""; this.css(e) }; var f = { transitionProperty: "", transitionDuration: "", transitionDelay: "" }; return d.removeTransitionStyles = function () { this.css(f) }, d.stagger = function (t) { t = isNaN(t) ? 0 : t, this.staggerDelay = t + "ms" }, d.removeElem = function () { this.element.parentNode.removeChild(this.element), this.css({ display: "" }), this.emitEvent("remove", [this]) }, d.remove = function () { return s && parseFloat(this.layout.options.transitionDuration) ? (this.once("transitionEnd", function () { this.removeElem() }), void this.hide()) : void this.removeElem() }, d.reveal = function () { delete this.isHidden, this.css({ display: "" }); var t = this.layout.options, e = {}, i = this.getHideRevealTransitionEndProperty("visibleStyle"); e[i] = this.onRevealTransitionEnd, this.transition({ from: t.hiddenStyle, to: t.visibleStyle, isCleaning: !0, onTransitionEnd: e }) }, d.onRevealTransitionEnd = function () { this.isHidden || this.emitEvent("reveal") }, d.getHideRevealTransitionEndProperty = function (t) { var e = this.layout.options[t]; if (e.opacity) return "opacity"; for (var i in e) return i }, d.hide = function () { this.isHidden = !0, this.css({ display: "" }); var t = this.layout.options, e = {}, i = this.getHideRevealTransitionEndProperty("hiddenStyle"); e[i] = this.onHideTransitionEnd, this.transition({ from: t.visibleStyle, to: t.hiddenStyle, isCleaning: !0, onTransitionEnd: e }) }, d.onHideTransitionEnd = function () { this.isHidden && (this.css({ display: "none" }), this.emitEvent("hide")) }, d.destroy = function () { this.css({ position: "", left: "", right: "", top: "", bottom: "", transition: "", transform: "" }) }, n }), function (t, e) { "use strict"; "function" == typeof define && define.amd ? define("outlayer/outlayer", ["ev-emitter/ev-emitter", "get-size/get-size", "fizzy-ui-utils/utils", "./item"], function (i, n, o, r) { return e(t, i, n, o, r) }) : "object" == typeof module && module.exports ? module.exports = e(t, require("ev-emitter"), require("get-size"), require("fizzy-ui-utils"), require("./item")) : t.Outlayer = e(t, t.EvEmitter, t.getSize, t.fizzyUIUtils, t.Outlayer.Item) }(window, function (t, e, i, n, o) { "use strict"; function r(t, e) { var i = n.getQueryElement(t); if (!i) return void (h && h.error("Bad element for " + this.constructor.namespace + ": " + (i || t))); this.element = i, u && (this.$element = u(this.element)), this.options = n.extend({}, this.constructor.defaults), this.option(e); var o = ++l; this.element.outlayerGUID = o, c[o] = this, this._create(); var r = this._getOption("initLayout"); r && this.layout() } function s(t) { function e() { t.apply(this, arguments) } return e.prototype = Object.create(t.prototype), e.prototype.constructor = e, e } function a(t) { if ("number" == typeof t) return t; var e = t.match(/(^\d*\.?\d*)(\w*)/), i = e && e[1], n = e && e[2]; if (!i.length) return 0; i = parseFloat(i); var o = m[n] || 1; return i * o } var h = t.console, u = t.jQuery, d = function () { }, l = 0, c = {}; r.namespace = "outlayer", r.Item = o, r.defaults = { containerStyle: { position: "relative" }, initLayout: !0, originLeft: !0, originTop: !0, resize: !0, resizeContainer: !0, transitionDuration: "0.4s", hiddenStyle: { opacity: 0, transform: "scale(0.001)" }, visibleStyle: { opacity: 1, transform: "scale(1)" } }; var f = r.prototype; n.extend(f, e.prototype), f.option = function (t) { n.extend(this.options, t) }, f._getOption = function (t) { var e = this.constructor.compatOptions[t]; return e && void 0 !== this.options[e] ? this.options[e] : this.options[t] }, r.compatOptions = { initLayout: "isInitLayout", horizontal: "isHorizontal", layoutInstant: "isLayoutInstant", originLeft: "isOriginLeft", originTop: "isOriginTop", resize: "isResizeBound", resizeContainer: "isResizingContainer" }, f._create = function () { this.reloadItems(), this.stamps = [], this.stamp(this.options.stamp), n.extend(this.element.style, this.options.containerStyle); var t = this._getOption("resize"); t && this.bindResize() }, f.reloadItems = function () { this.items = this._itemize(this.element.children) }, f._itemize = function (t) { for (var e = this._filterFindItemElements(t), i = this.constructor.Item, n = [], o = 0; o < e.length; o++) { var r = e[o], s = new i(r, this); n.push(s) } return n }, f._filterFindItemElements = function (t) { return n.filterFindElements(t, this.options.itemSelector) }, f.getItemElements = function () { return this.items.map(function (t) { return t.element }) }, f.layout = function () { this._resetLayout(), this._manageStamps(); var t = this._getOption("layoutInstant"), e = void 0 !== t ? t : !this._isLayoutInited; this.layoutItems(this.items, e), this._isLayoutInited = !0 }, f._init = f.layout, f._resetLayout = function () { this.getSize() }, f.getSize = function () { this.size = i(this.element) }, f._getMeasurement = function (t, e) { var n, o = this.options[t]; o ? ("string" == typeof o ? n = this.element.querySelector(o) : o instanceof HTMLElement && (n = o), this[t] = n ? i(n)[e] : o) : this[t] = 0 }, f.layoutItems = function (t, e) { t = this._getItemsForLayout(t), this._layoutItems(t, e), this._postLayout() }, f._getItemsForLayout = function (t) { return t.filter(function (t) { return !t.isIgnored }) }, f._layoutItems = function (t, e) { if (this._emitCompleteOnItems("layout", t), t && t.length) { var i = []; t.forEach(function (t) { var n = this._getItemLayoutPosition(t); n.item = t, n.isInstant = e || t.isLayoutInstant, i.push(n) }, this), this._processLayoutQueue(i) } }, f._getItemLayoutPosition = function () { return { x: 0, y: 0 } }, f._processLayoutQueue = function (t) { this.updateStagger(), t.forEach(function (t, e) { this._positionItem(t.item, t.x, t.y, t.isInstant, e) }, this) }, f.updateStagger = function () { var t = this.options.stagger; return null === t || void 0 === t ? void (this.stagger = 0) : (this.stagger = a(t), this.stagger) }, f._positionItem = function (t, e, i, n, o) { n ? t.goTo(e, i) : (t.stagger(o * this.stagger), t.moveTo(e, i)) }, f._postLayout = function () { this.resizeContainer() }, f.resizeContainer = function () { var t = this._getOption("resizeContainer"); if (t) { var e = this._getContainerSize(); e && (this._setContainerMeasure(e.width, !0), this._setContainerMeasure(e.height, !1)) } }, f._getContainerSize = d, f._setContainerMeasure = function (t, e) { if (void 0 !== t) { var i = this.size; i.isBorderBox && (t += e ? i.paddingLeft + i.paddingRight + i.borderLeftWidth + i.borderRightWidth : i.paddingBottom + i.paddingTop + i.borderTopWidth + i.borderBottomWidth), t = Math.max(t, 0), this.element.style[e ? "width" : "height"] = t + "px" } }, f._emitCompleteOnItems = function (t, e) { function i() { o.dispatchEvent(t + "Complete", null, [e]) } function n() { s++, s == r && i() } var o = this, r = e.length; if (!e || !r) return void i(); var s = 0; e.forEach(function (e) { e.once(t, n) }) }, f.dispatchEvent = function (t, e, i) { var n = e ? [e].concat(i) : i; if (this.emitEvent(t, n), u) if (this.$element = this.$element || u(this.element), e) { var o = u.Event(e); o.type = t, this.$element.trigger(o, i) } else this.$element.trigger(t, i) }, f.ignore = function (t) { var e = this.getItem(t); e && (e.isIgnored = !0) }, f.unignore = function (t) { var e = this.getItem(t); e && delete e.isIgnored }, f.stamp = function (t) { t = this._find(t), t && (this.stamps = this.stamps.concat(t), t.forEach(this.ignore, this)) }, f.unstamp = function (t) { t = this._find(t), t && t.forEach(function (t) { n.removeFrom(this.stamps, t), this.unignore(t) }, this) }, f._find = function (t) { return t ? ("string" == typeof t && (t = this.element.querySelectorAll(t)), t = n.makeArray(t)) : void 0 }, f._manageStamps = function () { this.stamps && this.stamps.length && (this._getBoundingRect(), this.stamps.forEach(this._manageStamp, this)) }, f._getBoundingRect = function () { var t = this.element.getBoundingClientRect(), e = this.size; this._boundingRect = { left: t.left + e.paddingLeft + e.borderLeftWidth, top: t.top + e.paddingTop + e.borderTopWidth, right: t.right - (e.paddingRight + e.borderRightWidth), bottom: t.bottom - (e.paddingBottom + e.borderBottomWidth) } }, f._manageStamp = d, f._getElementOffset = function (t) { var e = t.getBoundingClientRect(), n = this._boundingRect, o = i(t), r = { left: e.left - n.left - o.marginLeft, top: e.top - n.top - o.marginTop, right: n.right - e.right - o.marginRight, bottom: n.bottom - e.bottom - o.marginBottom }; return r }, f.handleEvent = n.handleEvent, f.bindResize = function () { t.addEventListener("resize", this), this.isResizeBound = !0 }, f.unbindResize = function () { t.removeEventListener("resize", this), this.isResizeBound = !1 }, f.onresize = function () { this.resize() }, n.debounceMethod(r, "onresize", 100), f.resize = function () { this.isResizeBound && this.needsResizeLayout() && this.layout() }, f.needsResizeLayout = function () { var t = i(this.element), e = this.size && t; return e && t.innerWidth !== this.size.innerWidth }, f.addItems = function (t) { var e = this._itemize(t); return e.length && (this.items = this.items.concat(e)), e }, f.appended = function (t) { var e = this.addItems(t); e.length && (this.layoutItems(e, !0), this.reveal(e)) }, f.prepended = function (t) { var e = this._itemize(t); if (e.length) { var i = this.items.slice(0); this.items = e.concat(i), this._resetLayout(), this._manageStamps(), this.layoutItems(e, !0), this.reveal(e), this.layoutItems(i) } }, f.reveal = function (t) { if (this._emitCompleteOnItems("reveal", t), t && t.length) { var e = this.updateStagger(); t.forEach(function (t, i) { t.stagger(i * e), t.reveal() }) } }, f.hide = function (t) { if (this._emitCompleteOnItems("hide", t), t && t.length) { var e = this.updateStagger(); t.forEach(function (t, i) { t.stagger(i * e), t.hide() }) } }, f.revealItemElements = function (t) { var e = this.getItems(t); this.reveal(e) }, f.hideItemElements = function (t) { var e = this.getItems(t); this.hide(e) }, f.getItem = function (t) { for (var e = 0; e < this.items.length; e++) { var i = this.items[e]; if (i.element == t) return i } }, f.getItems = function (t) { t = n.makeArray(t); var e = []; return t.forEach(function (t) { var i = this.getItem(t); i && e.push(i) }, this), e }, f.remove = function (t) { var e = this.getItems(t); this._emitCompleteOnItems("remove", e), e && e.length && e.forEach(function (t) { t.remove(), n.removeFrom(this.items, t) }, this) }, f.destroy = function () { var t = this.element.style; t.height = "", t.position = "", t.width = "", this.items.forEach(function (t) { t.destroy() }), this.unbindResize(); var e = this.element.outlayerGUID; delete c[e], delete this.element.outlayerGUID, u && u.removeData(this.element, this.constructor.namespace) }, r.data = function (t) { t = n.getQueryElement(t); var e = t && t.outlayerGUID; return e && c[e] }, r.create = function (t, e) { var i = s(r); return i.defaults = n.extend({}, r.defaults), n.extend(i.defaults, e), i.compatOptions = n.extend({}, r.compatOptions), i.namespace = t, i.data = r.data, i.Item = s(o), n.htmlInit(i, t), u && u.bridget && u.bridget(t, i), i }; var m = { ms: 1, s: 1e3 }; return r.Item = o, r }), function (t, e) { "function" == typeof define && define.amd ? define(["outlayer/outlayer", "get-size/get-size"], e) : "object" == typeof module && module.exports ? module.exports = e(require("outlayer"), require("get-size")) : t.Masonry = e(t.Outlayer, t.getSize) }(window, function (t, e) { var i = t.create("masonry"); return i.compatOptions.fitWidth = "isFitWidth", i.prototype._resetLayout = function () { this.getSize(), this._getMeasurement("columnWidth", "outerWidth"), this._getMeasurement("gutter", "outerWidth"), this.measureColumns(), this.colYs = []; for (var t = 0; t < this.cols; t++)this.colYs.push(0); this.maxY = 0 }, i.prototype.measureColumns = function () { if (this.getContainerWidth(), !this.columnWidth) { var t = this.items[0], i = t && t.element; this.columnWidth = i && e(i).outerWidth || this.containerWidth } var n = this.columnWidth += this.gutter, o = this.containerWidth + this.gutter, r = o / n, s = n - o % n, a = s && 1 > s ? "round" : "floor"; r = Math[a](r), this.cols = Math.max(r, 1) }, i.prototype.getContainerWidth = function () { var t = this._getOption("fitWidth"), i = t ? this.element.parentNode : this.element, n = e(i); this.containerWidth = n && n.innerWidth }, i.prototype._getItemLayoutPosition = function (t) { t.getSize(); var e = t.size.outerWidth % this.columnWidth, i = e && 1 > e ? "round" : "ceil", n = Math[i](t.size.outerWidth / this.columnWidth); n = Math.min(n, this.cols); for (var o = this._getColGroup(n), r = Math.min.apply(Math, o), s = o.indexOf(r), a = { x: this.columnWidth * s, y: r }, h = r + t.size.outerHeight, u = this.cols + 1 - o.length, d = 0; u > d; d++)this.colYs[s + d] = h; return a }, i.prototype._getColGroup = function (t) { if (2 > t) return this.colYs; for (var e = [], i = this.cols + 1 - t, n = 0; i > n; n++) { var o = this.colYs.slice(n, n + t); e[n] = Math.max.apply(Math, o) } return e }, i.prototype._manageStamp = function (t) { var i = e(t), n = this._getElementOffset(t), o = this._getOption("originLeft"), r = o ? n.left : n.right, s = r + i.outerWidth, a = Math.floor(r / this.columnWidth); a = Math.max(0, a); var h = Math.floor(s / this.columnWidth); h -= s % this.columnWidth ? 0 : 1, h = Math.min(this.cols - 1, h); for (var u = this._getOption("originTop"), d = (u ? n.top : n.bottom) + i.outerHeight, l = a; h >= l; l++)this.colYs[l] = Math.max(d, this.colYs[l]) }, i.prototype._getContainerSize = function () { this.maxY = Math.max.apply(Math, this.colYs); var t = { height: this.maxY }; return this._getOption("fitWidth") && (t.width = this._getContainerFitWidth()), t }, i.prototype._getContainerFitWidth = function () { for (var t = 0, e = this.cols; --e && 0 === this.colYs[e];)t++; return (this.cols - t) * this.columnWidth - this.gutter }, i.prototype.needsResizeLayout = function () { var t = this.containerWidth; return this.getContainerWidth(), t != this.containerWidth }, i });

/*!
 * jquery.lightbox.js v1.3
 * https://github.com/duncanmcdougall/Responsive-Lightbox
 * Copyright 2015 Duncan McDougall and other contributors; @license Creative Commons Attribution 2.5
 *
 * Options: 
 * margin - int - default 50. Minimum margin around the image
 * nav - bool - default true. enable navigation
 * blur - bool - default true. Blur other content when open using css filter
 * minSize - int - default 0. Min window width or height to open lightbox. Below threshold will open image in a new tab.
 *
 */
!function (a) { "use strict"; a.fn.lightbox = function (b) { var c = { margin: 50, nav: !0, blur: !0, minSize: 0 }, d = { items: [], lightbox: null, image: null, current: null, locked: !1, caption: null, init: function (b) { d.items = b; var e = "lightbox-" + Math.floor(1e5 * Math.random() + 1); a("body").append('<div id="' + e + '" class="lightbox" style="display:none;"><a href="#" class="lightbox__close lightbox__button"></a><a href="#" class="lightbox__nav lightbox__nav--prev lightbox__button"></a><a href="#" class="lightbox__nav lightbox__nav--next lightbox__button"></a><div href="#" class="lightbox__caption"><p></p></div></div>'), d.lightbox = a("#" + e), d.caption = a(".lightbox__caption", d.lightbox), d.items.length > 1 && c.nav ? a(".lightbox__nav", d.lightbox).show() : a(".lightbox__nav", d.lightbox).hide(), d.bindEvents() }, loadImage: function () { c.blur && a("body").addClass("blurred"), a("img", d.lightbox).remove(), d.lightbox.fadeIn("fast").append('<span class="lightbox__loading"></span>'); var b = a('<img src="' + a(d.current).attr("href") + '" draggable="false">'); a(b).on("load", function () { a(".lightbox__loading").remove(), d.lightbox.append(b), d.image = a("img", d.lightbox).hide(), d.resizeImage(), d.setCaption() }) }, setCaption: function () { var b = a(d.current).data("caption"); b && b.length > 0 ? (d.caption.fadeIn(), a("p", d.caption).text(b)) : d.caption.hide() }, resizeImage: function () { var b, e, f, g, h; e = a(window).height() - c.margin, f = a(window).outerWidth(!0) - c.margin, d.image.width("").height(""), g = d.image.height(), h = d.image.width(), h > f && (b = f / h, h = f, g = Math.round(g * b)), g > e && (b = e / g, g = e, h = Math.round(h * b)), d.image.width(h).height(g).css({ top: (a(window).height() - d.image.outerHeight()) / 2 + "px", left: (a(window).width() - d.image.outerWidth()) / 2 + "px" }).show(), d.locked = !1 }, getCurrentIndex: function () { return a.inArray(d.current, d.items) }, next: function () { return d.locked ? !1 : (d.locked = !0, void (d.getCurrentIndex() >= d.items.length - 1 ? a(d.items[0]).click() : a(d.items[d.getCurrentIndex() + 1]).click())) }, previous: function () { return d.locked ? !1 : (d.locked = !0, void (d.getCurrentIndex() <= 0 ? a(d.items[d.items.length - 1]).click() : a(d.items[d.getCurrentIndex() - 1]).click())) }, bindEvents: function () { a(d.items).click(function (b) { if (!d.lightbox.is(":visible") && (a(window).width() < c.minSize || a(window).height() < c.minSize)) return void a(this).attr("target", "_blank"); var e = a(this)[0]; b.preventDefault(), d.current = e, d.loadImage(), a(document).on("keydown", function (a) { 27 === a.keyCode && d.close(), 39 === a.keyCode && d.next(), 37 === a.keyCode && d.previous() }) }), d.lightbox.on("click", function (a) { this === a.target && d.close() }), a(d.lightbox).on("click", ".lightbox__nav--prev", function () { return d.previous(), !1 }), a(d.lightbox).on("click", ".lightbox__nav--next", function () { return d.next(), !1 }), a(d.lightbox).on("click", ".lightbox__close", function () { return d.close(), !1 }), a(window).resize(function () { d.image && d.resizeImage() }) }, close: function () { a(document).off("keydown"), a(d.lightbox).fadeOut("fast"), a("body").removeClass("blurred") } }; a.extend(c, b), d.init(this) } }(jQuery);

/*! http://responsiveslides.com v1.54 by @viljamis */
(function (c, I, B) {
    c.fn.responsiveSlides = function (l) {
        var a = c.extend({ auto: !0, speed: 500, timeout: 4E3, pager: !1, nav: !1, random: !1, pause: !1, pauseControls: !0, prevText: "Previous", nextText: "Next", maxwidth: "", navContainer: "", manualControls: "", namespace: "rslides", before: c.noop, after: c.noop }, l); return this.each(function () {
            B++; var f = c(this), s, r, t, m, p, q, n = 0, e = f.children(), C = e.size(), h = parseFloat(a.speed), D = parseFloat(a.timeout), u = parseFloat(a.maxwidth), g = a.namespace, d = g + B, E = g + "_nav " + d + "_nav", v = g + "_here", j = d + "_on",
                w = d + "_s", k = c("<ul class='" + g + "_tabs " + d + "_tabs' />"), x = { "float": "left", position: "relative", opacity: 1, zIndex: 2 }, y = { "float": "none", position: "absolute", opacity: 0, zIndex: 1 }, F = function () { var b = (document.body || document.documentElement).style, a = "transition"; if ("string" === typeof b[a]) return !0; s = ["Moz", "Webkit", "Khtml", "O", "ms"]; var a = a.charAt(0).toUpperCase() + a.substr(1), c; for (c = 0; c < s.length; c++)if ("string" === typeof b[s[c] + a]) return !0; return !1 }(), z = function (b) {
                    a.before(b); F ? (e.removeClass(j).css(y).eq(b).addClass(j).css(x),
                        n = b, setTimeout(function () { a.after(b) }, h)) : e.stop().fadeOut(h, function () { c(this).removeClass(j).css(y).css("opacity", 1) }).eq(b).fadeIn(h, function () { c(this).addClass(j).css(x); a.after(b); n = b })
                }; a.random && (e.sort(function () { return Math.round(Math.random()) - 0.5 }), f.empty().append(e)); e.each(function (a) { this.id = w + a }); f.addClass(g + " " + d); l && l.maxwidth && f.css("max-width", u); e.hide().css(y).eq(0).addClass(j).css(x).show(); F && e.show().css({
                    "-webkit-transition": "opacity " + h + "ms ease-in-out", "-moz-transition": "opacity " +
                        h + "ms ease-in-out", "-o-transition": "opacity " + h + "ms ease-in-out", transition: "opacity " + h + "ms ease-in-out"
                }); if (1 < e.size()) {
                    if (D < h + 100) return; if (a.pager && !a.manualControls) { var A = []; e.each(function (a) { a += 1; A += "<li><a href='#' class='" + w + a + "'>" + a + "</a></li>" }); k.append(A); l.navContainer ? c(a.navContainer).append(k) : f.after(k) } a.manualControls && (k = c(a.manualControls), k.addClass(g + "_tabs " + d + "_tabs")); (a.pager || a.manualControls) && k.find("li").each(function (a) { c(this).addClass(w + (a + 1)) }); if (a.pager || a.manualControls) q =
                        k.find("a"), r = function (a) { q.closest("li").removeClass(v).eq(a).addClass(v) }; a.auto && (t = function () { p = setInterval(function () { e.stop(!0, !0); var b = n + 1 < C ? n + 1 : 0; (a.pager || a.manualControls) && r(b); z(b) }, D) }, t()); m = function () { a.auto && (clearInterval(p), t()) }; a.pause && f.hover(function () { clearInterval(p) }, function () { m() }); if (a.pager || a.manualControls) q.bind("click", function (b) { b.preventDefault(); a.pauseControls || m(); b = q.index(this); n === b || c("." + j).queue("fx").length || (r(b), z(b)) }).eq(0).closest("li").addClass(v),
                            a.pauseControls && q.hover(function () { clearInterval(p) }, function () { m() }); if (a.nav) {
                                g = "<a href='#' class='" + E + " prev'>" + a.prevText + "</a><a href='#' class='" + E + " next'>" + a.nextText + "</a>"; l.navContainer ? c(a.navContainer).append(g) : f.after(g); var d = c("." + d + "_nav"), G = d.filter(".prev"); d.bind("click", function (b) { b.preventDefault(); b = c("." + j); if (!b.queue("fx").length) { var d = e.index(b); b = d - 1; d = d + 1 < C ? n + 1 : 0; z(c(this)[0] === G[0] ? b : d); if (a.pager || a.manualControls) r(c(this)[0] === G[0] ? b : d); a.pauseControls || m() } });
                                a.pauseControls && d.hover(function () { clearInterval(p) }, function () { m() })
                            }
                } if ("undefined" === typeof document.body.style.maxWidth && l.maxwidth) { var H = function () { f.css("width", "100%"); f.width() > u && f.css("width", u) }; H(); c(I).bind("resize", function () { H() }) }
        })
    }
})(jQuery, this, 0);


$(document).ready(function () {
    function gallery() {
        var imgW = $('.js-imgcalc').width(); var vw = $(window).innerWidth(); $('.js-imgcalc').each(function () {
            imgW = $('.js-imgcalc').width(); vw = $(window).innerWidth(); if (vw > 991) { $(this).css({ 'min-height': Math.round(imgW - 80) }); }
            else { $(this).css({ 'min-height': Math.round(imgW) }); $('.js-imgcalc-hexa').css({ 'min-height': Math.round(imgW) }); }
        });
    } gallery();
}); var resizeId; $(window).resize(function () { clearTimeout(resizeId); resizeId = setTimeout(doneResizing, 500); }); function doneResizing() {
    function gallery() {
        var imgW = $('.js-imgcalc').width(); var vw = $(window).innerWidth(); $('.js-imgcalc').each(function () {
            imgW = $('.js-imgcalc').width(); vw = $(window).innerWidth(); if (vw > 991) { $(this).css({ 'min-height': Math.round(imgW - 80) }); }
            else { $(this).css({ 'min-height': Math.round(imgW) }); $('.js-imgcalc-hexa').css({ 'min-height': Math.round(imgW) }); }
        });
    } gallery();
}

$(document).ready(function () {
    $(document).on('click', '#findMyGeo', function () {
        href = $(this).attr('data-href'); if (href.indexOf('?') >= 0) { href = href + '&'; } else { href = href + '?'; }
        href = href + "find=MyGeo"; document.location.href = href;
    });
});



$(document).ready(function () { var roomPlannerPopup = $('.js-roomplanner-pop-up'); if ($.cookie('floating-roomplanner') === undefined || $.cookie('floating-roomplanner') === null) { if (roomPlannerPopup.length) { roomPlannerPopup.addClass('active'); setTimeout(function () { roomPlannerPopup.removeClass('active'); $.cookie('floating-roomplanner', true, { expires: 7 }); }, 4000); } } });

